depends perl   &&
depends python3 &&
depends LIBAVCODEC &&
depends libass &&

optional_depends luajit \
                 "--enable-lua" \
                 "--disable-lua" \
                 "for Lua scripting support" &&

optional_depends docutils \
                 "--enable-manpage-build" \
                 "--disable-manpage-build" \
                 "to build and install manpage" &&

# audio output
optional_depends alsa-lib \
                 "--enable-alsa" \
                 "--disable-alsa" \
                 "for ALSA audio output" &&

optional_depends pulseaudio \
                 "--enable-pulse" \
                 "--disable-pulse" \
                 "for Pulseaudio audio output" &&

optional_depends JACK-DRIVER \
                 "--enable-jack" \
                 "--disable-jack" \
                 "for JACK audio output" &&

optional_depends openal \
                 "--enable-openal" \
                 "--disable-openal" \
                 "for OpenAL audio output" &&

optional_depends sdl2 \
                 "--enable-sdl2" \
                 "--disable-sdl2" \
                 "for SDL 2.0+ audio and video output" &&

# video output
optional_depends OPENGL \
                 "--enable-gl" \
                 "--disable-gl" \
                 "for OpenGL video output" &&

optional_depends libcaca \
                 "--enable-caca" \
                 "--disable-caca" \
                 "for CACA video output" &&

optional_depends libx11 \
                 "--enable-x11" \
                 "--disable-x11" \
                 "for X11 video output" &&

if is_depends_enabled $SPELL libx11; then
  depends libxext &&
  depends libxrandr &&
  depends libxscrnsaver &&
  depends libxinerama &&

  optional_depends libvdpau \
                   "--enable-vdpau" \
                   "--disable-vdpau" \
                   "for VDPAU acceleration" &&

  optional_depends libxv \
                   "--enable-xv" \
                   "--disable-xv" \
                   "for Xv video output"
else
  list_add MPV_OPTS "--disable-xf86vm" &&
  list_add MPV_OPTS "--disable-vdpau" &&
  list_add MPV_OPTS "--disable-xv" &&
  list_remove MPV_OPTS "--disable-xinerama" &&
  list_remove MPV_OPTS "--disable-xext"
fi &&

# codecs
optional_depends JPEG \
                 "--enable-jpeg" \
                 "--disable-jpeg" \
                 "for JPEG input/output support" &&

optional_depends libcdio-paranoia \
                 "--enable-cdda" \
                 "--disable-cdda" \
                 "for cdda support" &&

# features
list_remove MPV_OPTS "--enable-radio-capture" &&
list_remove MPV_OPTS "--disable-radio-capture" &&
list_remove MPV_OPTS "--enable-pvr" &&
list_remove MPV_OPTS "--disable-pvr" &&

if is_depends_enabled $SPELL samba; then
  depends SSL
fi &&

optional_depends lcms2 \
                 "--enable-lcms2" \
                 "--disable-lcms2" \
                 "for LCMS2 support" &&

optional_depends libbluray \
                 "--enable-libbluray" \
                 "--disable-libbluray" \
                 "for Blu-ray support" &&

optional_depends libdvdnav \
                 "--enable-dvdnav" \
                 "--disable-dvdnav" \
                 "for dvd navigation support" &&

optional_depends uchardet \
                 "--enable-uchardet" \
                 "--disable-uchardet" \
                 "for charset discovery and conversion using uchardet" &&

optional_depends smgl-gl_select "" "" "to select OPENGL provider" &&

if is_depends_enabled $SPELL luajit; then
  optional_depends youtube-dl "" "" "to watch Youtube videos"
fi &&

optional_depends libarchive \
                 "--enable-libarchive" \
                 "--disable-libarchive" \
                 "to support reading zip files and more"
