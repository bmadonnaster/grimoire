From 551677fe23c758d4a045f32ea398f576b3285b60 Mon Sep 17 00:00:00 2001
From: Thomas Deutschmann <whissi@gentoo.org>
Date: Mon, 6 Sep 2021 16:44:00 +0200
Subject: [PATCH 33/33] bmo#1728749: Pre-select OS dialog when using Pipewire
 for screen sharing

Signed-off-by: Thomas Deutschmann <whissi@gentoo.org>
---
 browser/actors/WebRTCParent.jsm | 5 +++++
 1 file changed, 5 insertions(+)

diff --git a/browser/actors/WebRTCParent.jsm b/browser/actors/WebRTCParent.jsm
index c28af6db1a..87b97671d6 100644
--- a/browser/actors/WebRTCParent.jsm
+++ b/browser/actors/WebRTCParent.jsm
@@ -870,6 +870,11 @@ function prompt(aActor, aBrowser, aRequest) {
               );
               item.deviceId = device.id;
               item.mediaSource = type;
+
+              // In this case the OS sharing dialog will be the only option and
+              // can be safely pre-selected.
+              menupopup.parentNode.selectedItem = item;
+              menupopup.parentNode.disabled = true;
               break;
             }
             if (type == "application") {
-- 
2.33.0

