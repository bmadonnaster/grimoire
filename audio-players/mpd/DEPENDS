depends -sub CXX gcc &&
depends boost &&
depends meson &&

# TODO: missing libraries in grimoire:
# - libgme (-Dgme=true) for Blargg's game music emulator plugin
# - libadplug (-Dadplug=true) for AdPlug decoder plugin

optional_depends icu \
                 "-Dicu=true" \
                 "-Dicu=false" \
                 "for Unicode support" &&

optional_depends libao \
                 "-Dao=true" \
                 "-Dao=false" \
                 "for libao support" &&

optional_depends yajl \
                 "-Dsoundcloud=true" \
                 "-Dsoundcloud=false" \
                 "for soundcloud.com support" &&

optional_depends zlib \
                 "-Dzlib=true" \
                 "-Dzlib=false" \
                 "for zlib support" &&

optional_depends bzip2 \
                 "-Dbzip2=true" \
                 "-Dbzip2=false" \
                 "for bzip2 archive support" &&

optional_depends zziplib \
                 "-Dzzip=true" \
                 "-Dzzip=false" \
                 "for zip archive support" &&

optional_depends libvorbis \
                 "-Dvorbis=true" \
                 "-Dvorbis=false" \
                 "for Ogg Vorbis support" &&

if is_depends_enabled $SPELL libvorbis; then
  depends libogg &&

  config_query_option MPD_OPTS "Enable Ogg Vorbis encoder support?" y \
                               "-Dvorbisenc=true" \
                               "-Dvorbisenc=false"
fi &&

optional_depends sidplay-libs \
                 "-Dsidplay=true" \
                 "-Dsidplay=false" \
                 "for C64 SID support" &&

#optional_depends libmpcdec \
#                 "-Dmpc=true" \
#                 "-Dmpc=false" \
#                 "for musepack support" &&

optional_depends flac \
                 "-Dflac=true" \
                 "-Dflac=false" \
                 "for FLAC support" &&

optional_depends faad2 \
                 "-Dfaad=true" \
                 "-Dfaad=false" \
                 "for MP4/AAC audio support" &&

optional_depends audiofile \
                 "-Daudiofile=true" \
                 "-Daudiofile=false" \
                 "for WAVE, AIFF and AU file support" &&

if is_depends_enabled $SPELL audiofile; then
  config_query_option MPD_OPTS "Enable WAVE encoder support?" y \
                               "-Dwave_encoder=true" \
                               "-Dwave_encoder=false"
fi &&

optional_depends libsndfile \
                 "-Dsndfile=true" \
                 "-Dsndfile=false" \
                 "for sndfile support" &&

optional_depends alsa-lib \
                 "-Dalsa=true" \
                 "-Dalsa=false" \
                 "for alsa mixer support" &&

optional_depends oss \
                 "-Doss=true" \
                 "-Doss=false" \
                 "for Open Sound System support" &&

optional_depends JACK-DRIVER \
                 "-Djack=true" \
                 "-Djack=false" \
                 "for JACK output support" &&

optional_depends pulseaudio \
                 "-Dpulse=true" \
                 "-Dpulse=false" \
                 "for pulseaudio output support" &&

optional_depends libmad \
                 "-Dmad=true" \
                 "-Dmad=false" \
                 "for mp3 files support (libmad)" &&

optional_depends mpg123 \
                 "-Dmpg123=true" \
                 "-Dmpg123=false" \
                 "for mp3 files support (libmpg123)" &&

optional_depends libopus \
                 "-Dopus=true" \
                 "-Dopus=false" \
                 "for opus decoder support" &&

optional_depends libid3tag \
                 "-Did3tag=true" \
                 "-Did3tag=false" \
                 "to use id3 tags" &&

optional_depends chromaprint \
                 "-Dchromaprint=true" \
                 "-Dchromaprint=false" \
                 "for ChromaPrint/AcoustID support" &&

optional_depends libmikmod \
                 "-Dmikmod=true" \
                 "-Dmikmod=false" \
                 "for mod file support (libmikmod)" &&

optional_depends libmodplug \
                 "-Dmodplug=true" \
                 "-Dmodplug=false" \
                 "for mod file support (libmodplug)" &&

optional_depends wildmidi \
                 "-Dwildmidi=true" \
                 "-Dwildmidi=false" \
                 "for MIDI support via wildmidi" &&

optional_depends fluidsynth \
                 "-Dfluidsynth=true" \
                 "-Dfluidsynth=false" \
                 "for MIDI support via fluidsynth" &&

optional_depends libsamplerate \
                 "-Dlibsamplerate=true" \
                 "-Dlibsamplerate=false" \
                 "for samplerate conversions" &&

optional_depends libshout \
                 "-Dshout=true" \
                 "-Dshout=false" \
                 "for shoutcast streaming output support" &&

optional_depends wavpack \
                 "-Dwavpack=true" \
                 "-Dwavpack=false" \
                 "for WavPack support" &&

optional_depends lame \
                 "-Dlame=true" \
                 "-Dlame=false" \
                 "for LAME encoder support" &&

optional_depends twolame \
                 "-Dtwolame=true" \
                 "-Dtwolame=false" \
                 "for TwoLAME mp2 encoder support" &&

optional_depends curl \
                 "-Dcurl=true" \
                 "-Dcurl=false" \
                 "for obtaining song data via HTTP support" &&

optional_depends sqlite \
                 "-Dsqlite=true" \
                 "-Dsqlite=false" \
                 "for SQLite database support" &&

optional_depends LIBAVCODEC \
                 "-Dffmpeg=true" \
                 "-Dffmpeg=false" \
                 "for FFMPEG support" &&

if is_depends_enabled $SPELL ffmpeg; then
  sub_depends ffmpeg STABLE
fi &&

optional_depends libmpdclient \
                 "-Dlibmpdclient=true" \
                 "-Dlibmpdclient=false" \
                 "for MPD client support" &&

optional_depends OPENAL \
                 "-Dopenal=true" \
                 "-Dopenal=false" \
                 "for OpenAL support" &&

optional_depends libmms \
                 "-Dmms=true" \
                 "-Dmms=false" \
                 "for MMS protocol support" &&

optional_depends libnfs \
                 "-Dnfs=true" \
                 "-Dnfs=false" \
                 "for NFS protocol support" &&

optional_depends samba4 \
                 "-Dsmbclient=true" \
                 "-Dsmbclient=false" \
                 "for SMB protocol support" &&

optional_depends libcdio \
                 "-Diso9660=true" \
                 "-Diso9660=false" \
                 "for libiso9660 archive plugin" &&

optional_depends libcdio-paranoia \
                 "-Dcdio_paranoia=true" \
                 "-Dcdio_paranoia=false" \
                 "for audio CD support" &&

optional_depends avahi \
                 "-Dzeroconf=avahi" \
                 "-Dzeroconf=no" \
                 "for Zeroconf service discovery support" &&

optional_depends SYSTEM-LOGGER \
                 "-Dsyslog=true" \
                 "-Dsyslog=false" \
                 "for syslog support" &&

optional_depends systemd \
                 "-Dsystemd=true" \
                 "-Dsystemd=false" \
                 "to use the systemd daemon library" &&

optional_depends tcp_wrappers \
                 "-Dlibwrap=true" \
                 "-Dlibwrap=false" \
                 "to use libwrap" &&

optional_depends udisks2 \
                 "-Dudisks=true" \
                 "-Dudisks=false" \
                 "for removable media support" &&

optional_depends expat \
                 "-Dwebdav=true" \
		 "-Dwebdav=false" \
		 "for WebDAV support" &&

if is_depends_enabled $SPELL expat; then
  depends curl
fi &&

optional_depends xmlto \
                 "-Ddocumentation=true" \
                 "-Ddocumentation=false" \
                 "to build documentation" &&

# Xmlto is not enough.
if is_depends_enabled $SPELL xmlto; then
  depends doxygen
fi
