From e39dd9bc9f24875e037e865c2a7a1d7bc10df4f3 Mon Sep 17 00:00:00 2001
From: Florian Franzmann <bwlf@bandrate.org>
Date: Fri, 30 Mar 2018 16:07:01 +0200
Subject: [PATCH 2/2] /sbin/ip

---
 iface.defn          | 56 ++++++++++++++++++++--------------------
 inet.defn           | 44 +++++++++++++++----------------
 inet6.defn          | 74 ++++++++++++++++++++++++++---------------------------
 link.defn           | 16 ++++++------
 tests/linux/down.1  | 42 +++++++++++++++---------------
 tests/linux/down.11 |  8 +++---
 tests/linux/down.13 |  2 +-
 tests/linux/down.16 | 38 +++++++++++++--------------
 tests/linux/down.17 |  8 +++---
 tests/linux/down.18 | 10 ++++----
 tests/linux/down.2  | 36 +++++++++++++-------------
 tests/linux/down.3  | 16 ++++++------
 tests/linux/down.4  |  6 ++---
 tests/linux/down.5  |  6 ++---
 tests/linux/down.6  |  6 ++---
 tests/linux/down.7  | 38 +++++++++++++--------------
 tests/linux/down.8  | 14 +++++-----
 tests/linux/down.9  |  6 ++---
 tests/linux/up.1    | 28 ++++++++++----------
 tests/linux/up.11   |  6 ++---
 tests/linux/up.13   |  2 +-
 tests/linux/up.16   | 26 +++++++++----------
 tests/linux/up.17   | 14 +++++-----
 tests/linux/up.18   | 10 ++++----
 tests/linux/up.2    | 24 ++++++++---------
 tests/linux/up.3    | 42 +++++++++++++++---------------
 tests/linux/up.4    |  4 +--
 tests/linux/up.5    |  4 +--
 tests/linux/up.6    |  4 +--
 tests/linux/up.7    | 58 ++++++++++++++++++++---------------------
 tests/linux/up.8    | 20 +++++++--------
 tests/linux/up.9    |  8 +++---
 wait-online.sh      |  2 +-
 33 files changed, 339 insertions(+), 339 deletions(-)

diff --git a/iface.defn b/iface.defn
index 6b058a0..a8360c0 100644
--- a/iface.defn
+++ b/iface.defn
@@ -2,35 +2,35 @@ architecture linux
 
 method address
   up
-    /bin/ip addr add dev %iface% %value%
+    /sbin/ip addr add dev %iface% %value%
   down
-    /bin/ip addr del dev %iface% %value%
+    /sbin/ip addr del dev %iface% %value%
 
 method route
   up
-    /bin/ip route add dev %iface% %value%
+    /sbin/ip route add dev %iface% %value%
   down
-    /bin/ip route del dev %iface% %value%
+    /sbin/ip route del dev %iface% %value%
 
 method gateway
   up
-    /bin/ip route add dev %iface% default via %value%
+    /sbin/ip route add dev %iface% default via %value%
   down
-    /bin/ip route del dev %iface% default via %value%
+    /sbin/ip route del dev %iface% default via %value%
 
 method rule
   up
-    /bin/ip rule add %value%
+    /sbin/ip rule add %value%
   down
-    /bin/ip rule del %value%
+    /sbin/ip rule del %value%
 
 method hwaddress
   pre-up
-    /bin/ip link set %iface% address %value%
+    /sbin/ip link set %iface% address %value%
 
 method mtu
   pre-up
-    /bin/ip link set %iface% address %value%
+    /sbin/ip link set %iface% address %value%
 
   options
     address address             -- Address (dotted quad/netmask) *required*
@@ -52,17 +52,17 @@ method mtu
     broadcast compute_v4_broadcast
 
   up
-    /bin/ip addr add %address%[[/%netmask%]] [[broadcast %broadcast%]] \
+    /sbin/ip addr add %address%[[/%netmask%]] [[broadcast %broadcast%]] \
 	[[peer %pointopoint%]] [[scope %scope%]] dev %iface% label %iface%
-    /bin/ip link set dev %iface% [[mtu %mtu%]] [[address %hwaddress%]] up
+    /sbin/ip link set dev %iface% [[mtu %mtu%]] [[address %hwaddress%]] up
 
-    [[ /bin/ip route add default via %gateway% [[metric %metric%]] dev %iface% onlink ]]
+    [[ /sbin/ip route add default via %gateway% [[metric %metric%]] dev %iface% onlink ]]
 
   down
-    [[ /bin/ip route del default via %gateway% [[metric %metric%]] dev %iface% 2>&1 1>/dev/null || true ]]
-    /bin/ip addr del %address%[[/%netmask%]] [[broadcast %broadcast%]] \
+    [[ /sbin/ip route del default via %gateway% [[metric %metric%]] dev %iface% 2>&1 1>/dev/null || true ]]
+    /sbin/ip addr del %address%[[/%netmask%]] [[broadcast %broadcast%]] \
 	[[peer %pointopoint%]] [[scope %scope%]] dev %iface% label %iface%
-    /bin/ip link set dev %iface% down \
+    /sbin/ip link set dev %iface% down \
 		if (iface_is_link())
 
 method manual
@@ -79,12 +79,12 @@ method manual
     hwaddress cleanup_hwaddress
 
   up
-    [[/bin/ip link set dev %iface% mtu %mtu%]]
-    [[/bin/ip link set dev %iface% address %hwaddress%]]
-    /bin/ip link set dev %iface% up 2>/dev/null || true
+    [[/sbin/ip link set dev %iface% mtu %mtu%]]
+    [[/sbin/ip link set dev %iface% address %hwaddress%]]
+    /sbin/ip link set dev %iface% up 2>/dev/null || true
 
   down
-    /bin/ip link set dev %iface% down 2>/dev/null || true \
+    /sbin/ip link set dev %iface% down 2>/dev/null || true \
         if (iface_is_link() && !do_all)
 
 method dhcp
@@ -109,7 +109,7 @@ method dhcp
     hwaddress cleanup_hwaddress
 
   up
-    [[/bin/ip link set dev %iface% address %hwaddress%]]
+    [[/sbin/ip link set dev %iface% address %hwaddress%]]
     /sbin/dhclient -4 -v -pf /run/dhclient.%iface%.pid -lf /var/lib/dhcp/dhclient.%iface%.leases -I -df /var/lib/dhcp/dhclient6.%iface%.leases %iface% \
 	[[-e IF_METRIC=%metric%]] \
         if (execable("/sbin/dhclient"))
@@ -135,7 +135,7 @@ method dhcp
     echo 'No DHCP client software found!' >/dev/stderr; false \
         elsif (1)
 
-    /bin/ip link set dev %iface% down \
+    /sbin/ip link set dev %iface% down \
 		if (iface_is_link())
 
 method bootp
@@ -154,7 +154,7 @@ method bootp
            [[--hwaddr %hwaddr%]] --returniffail --serverbcast
 
   down
-    /bin/ip link set dev %iface% down \
+    /sbin/ip link set dev %iface% down \
         if (iface_is_link())
 
 method tunnel
@@ -174,13 +174,13 @@ method tunnel
     ttl time              -- TTL setting
     mtu size              -- MTU size
   up
-    /bin/ip tunnel add %iface% mode %mode% remote %endpoint% [[local %local%]] \
+    /sbin/ip tunnel add %iface% mode %mode% remote %endpoint% [[local %local%]] \
        [[ttl %ttl%]]
-    /bin/ip link set %iface% up [[mtu %mtu%]]
-    /bin/ip addr add %address%/%netmask% dev %iface% [[peer %dstaddr%]]
-    [[ /bin/ip route add default via %gateway% [[metric %metric%]] dev %iface% onlink ]]
+    /sbin/ip link set %iface% up [[mtu %mtu%]]
+    /sbin/ip addr add %address%/%netmask% dev %iface% [[peer %dstaddr%]]
+    [[ /sbin/ip route add default via %gateway% [[metric %metric%]] dev %iface% onlink ]]
   down
-    /bin/ip tunnel del %iface%
+    /sbin/ip tunnel del %iface%
 
 method ppp
   description
diff --git a/inet.defn b/inet.defn
index 960d8c7..d2bbce9 100644
--- a/inet.defn
+++ b/inet.defn
@@ -6,10 +6,10 @@ method loopback
     This method may be used to define the IPv4 loopback interface.
 
   up
-    /bin/ip link set dev %iface% up if (!iface_is_lo())
+    /sbin/ip link set dev %iface% up if (!iface_is_lo())
 
   down
-    /bin/ip link set dev %iface% down if (!iface_is_lo())
+    /sbin/ip link set dev %iface% down if (!iface_is_lo())
 
 method static
   description
@@ -36,19 +36,19 @@ method static
     broadcast compute_v4_broadcast
 
   up
-    /bin/ip addr add %address%[[/%netmask%]] [[broadcast %broadcast%]] \
+    /sbin/ip addr add %address%[[/%netmask%]] [[broadcast %broadcast%]] \
 	[[peer %pointopoint%]] [[scope %scope%]] dev %iface% label %iface%
-    /bin/ip link set dev %iface% [[mtu %mtu%]] [[address %hwaddress%]] up
+    /sbin/ip link set dev %iface% [[mtu %mtu%]] [[address %hwaddress%]] up
 
-    [[ /bin/ip route add default via %gateway% [[metric %metric%]] dev %iface% onlink ]]
+    [[ /sbin/ip route add default via %gateway% [[metric %metric%]] dev %iface% onlink ]]
 
   down
-    [[ /bin/ip route del default via %gateway% [[metric %metric%]] dev %iface% 2>&1 1>/dev/null || true ]]
-    /bin/ip addr del %address%[[/%netmask%]] [[broadcast %broadcast%]] \
+    [[ /sbin/ip route del default via %gateway% [[metric %metric%]] dev %iface% 2>&1 1>/dev/null || true ]]
+    /sbin/ip addr del %address%[[/%netmask%]] [[broadcast %broadcast%]] \
 	[[peer %pointopoint%]] [[scope %scope%]] dev %iface% label %iface%
-    /bin/ip -4 addr flush dev %iface% \
+    /sbin/ip -4 addr flush dev %iface% \
     		if (iface_is_link())
-    /bin/ip link set dev %iface% down \
+    /sbin/ip link set dev %iface% down \
 		if (iface_is_link())
 
 method manual
@@ -65,14 +65,14 @@ method manual
     hwaddress cleanup_hwaddress
 
   up
-    [[/bin/ip link set dev %iface% mtu %mtu%]]
-    [[/bin/ip link set dev %iface% address %hwaddress%]]
-    /bin/ip link set dev %iface% up 2>/dev/null || true
+    [[/sbin/ip link set dev %iface% mtu %mtu%]]
+    [[/sbin/ip link set dev %iface% address %hwaddress%]]
+    /sbin/ip link set dev %iface% up 2>/dev/null || true
 
   down
-    /bin/ip -4 addr flush dev %iface% 2>/dev/null || true \
+    /sbin/ip -4 addr flush dev %iface% 2>/dev/null || true \
     	if (iface_is_link())
-    /bin/ip link set dev %iface% down 2>/dev/null || true \
+    /sbin/ip link set dev %iface% down 2>/dev/null || true \
         if (iface_is_link() && !do_all)
 
 method dhcp
@@ -97,7 +97,7 @@ method dhcp
     hwaddress cleanup_hwaddress
 
   up
-    [[/bin/ip link set dev %iface% address %hwaddress%]]
+    [[/sbin/ip link set dev %iface% address %hwaddress%]]
     /sbin/dhclient -4 -v -pf /run/dhclient.%iface%.pid -lf /var/lib/dhcp/dhclient.%iface%.leases -I -df /var/lib/dhcp/dhclient6.%iface%.leases %iface% \
 	[[-e IF_METRIC=%metric%]] \
         if (execable("/sbin/dhclient"))
@@ -123,7 +123,7 @@ method dhcp
     echo 'No DHCP client software found!' >&2; false \
         elsif (1)
 
-    /bin/ip link set dev %iface% down \
+    /sbin/ip link set dev %iface% down \
 		if (iface_is_link())
 
 method bootp
@@ -142,7 +142,7 @@ method bootp
            [[--hwaddr %hwaddr%]] --returniffail --serverbcast
 
   down
-    /bin/ip link set dev %iface% down \
+    /sbin/ip link set dev %iface% down \
         if (iface_is_link())
 
 method tunnel
@@ -162,13 +162,13 @@ method tunnel
     ttl time              -- TTL setting
     mtu size              -- MTU size
   up
-    /bin/ip tunnel add %iface% mode %mode% remote %endpoint% [[local %local%]] \
+    /sbin/ip tunnel add %iface% mode %mode% remote %endpoint% [[local %local%]] \
        [[ttl %ttl%]]
-    /bin/ip link set %iface% up [[mtu %mtu%]]
-    /bin/ip addr add %address%/%netmask% dev %iface% [[peer %dstaddr%]]
-    [[ /bin/ip route add default via %gateway% [[metric %metric%]] dev %iface% onlink ]]
+    /sbin/ip link set %iface% up [[mtu %mtu%]]
+    /sbin/ip addr add %address%/%netmask% dev %iface% [[peer %dstaddr%]]
+    [[ /sbin/ip route add default via %gateway% [[metric %metric%]] dev %iface% onlink ]]
   down
-    /bin/ip tunnel del %iface%
+    /sbin/ip tunnel del %iface%
 
 method ppp
   description
diff --git a/inet6.defn b/inet6.defn
index 9a7bb1b..e94b203 100644
--- a/inet6.defn
+++ b/inet6.defn
@@ -25,9 +25,9 @@ method auto
     -[[/sbin/sysctl -q -e -w net.ipv6.conf.%iface/.//%.use_tempaddr=%privext%]]
     -/sbin/sysctl -q -e -w net.ipv6.conf.%iface/.//%.accept_ra=%accept_ra%
     -/sbin/sysctl -q -e -w net.ipv6.conf.%iface/.//%.autoconf=1
-    /bin/ip addr flush dev %iface% mngtmpaddr \
+    /sbin/ip addr flush dev %iface% mngtmpaddr \
         if (var_set("accept_ra", ifd) && !var_true("accept_ra", ifd))
-    /bin/ip link set dev %iface% up
+    /sbin/ip link set dev %iface% up
     /lib/ifupdown/wait-for-ll6.sh if (var_true("dhcp", ifd) && execable("/lib/ifupdown/wait-for-ll6.sh"))
     /sbin/dhclient -6 -v -P -pf /run/dhclient6.%iface%.pid -lf /var/lib/dhcp/dhclient6.%iface%.leases -I -df /var/lib/dhcp/dhclient.%iface%.leases %iface% \
         if (var_true("dhcp", ifd) && execable("/sbin/dhclient") && var_true("request_prefix", ifd))
@@ -37,19 +37,19 @@ method auto
         elsif (var_true("dhcp", ifd))
 
   down
-    /bin/ip -6 addr flush dev %iface% scope global
-    /bin/ip link set dev %iface% down \
+    /sbin/ip -6 addr flush dev %iface% scope global
+    /sbin/ip link set dev %iface% down \
 		if (iface_is_link())
 
 method loopback
   description
     This method may be used to define the IPv6 loopback interface.
   up
-    -/bin/ip link set dev %iface% up 2>/dev/null if (!iface_is_lo())
-    -/bin/ip addr add dev %iface% ::1 2>/dev/null if (!iface_is_lo())
+    -/sbin/ip link set dev %iface% up 2>/dev/null if (!iface_is_lo())
+    -/sbin/ip addr add dev %iface% ::1 2>/dev/null if (!iface_is_lo())
   down
-    -/bin/ip addr del dev %iface% ::1 2>/dev/null if (!iface_is_lo())
-    -/bin/ip link set dev %iface% down 2>/dev/null if (!iface_is_lo())
+    -/sbin/ip addr del dev %iface% ::1 2>/dev/null if (!iface_is_lo())
+    -/sbin/ip link set dev %iface% down 2>/dev/null if (!iface_is_lo())
 
 method static
   description
@@ -87,22 +87,22 @@ method static
     -[[/sbin/sysctl -q -e -w net.ipv6.conf.%iface/.//%.accept_ra=%accept_ra%]]
     -[[/sbin/sysctl -q -e -w net.ipv6.conf.%iface/.//%.autoconf=%autoconf%]]
     -[[/sbin/sysctl -q -e -w net.ipv6.conf.%iface/.//%.mtu=%mtu%]]
-    /bin/ip addr flush dev %iface% mngtmpaddr \
+    /sbin/ip addr flush dev %iface% mngtmpaddr \
         if (var_set("accept_ra", ifd) && !var_true("accept_ra", ifd))
-    /bin/ip link set dev %iface% [[address %hwaddress%]] up
-    /bin/ip -6 addr add %address%[[/%netmask%]] [[scope %scope%]] dev %iface% [[preferred_lft %preferred-lifetime%]] \
+    /sbin/ip link set dev %iface% [[address %hwaddress%]] up
+    /sbin/ip -6 addr add %address%[[/%netmask%]] [[scope %scope%]] dev %iface% [[preferred_lft %preferred-lifetime%]] \
                 if (!var_set("dad-attempts", ifd) || var_true("dad-attempts", ifd))
-    /bin/ip -6 addr add %address%[[/%netmask%]] [[scope %scope%]] dev %iface% [[preferred_lft %preferred-lifetime%]] nodad \
+    /sbin/ip -6 addr add %address%[[/%netmask%]] [[scope %scope%]] dev %iface% [[preferred_lft %preferred-lifetime%]] nodad \
                 if (var_set("dad-attempts", ifd) && !var_true("dad-attempts", ifd))
-    [[ /bin/ip -6 route add default via %gateway% [[metric %metric%]] dev %iface% onlink ]]
+    [[ /sbin/ip -6 route add default via %gateway% [[metric %metric%]] dev %iface% onlink ]]
     /lib/ifupdown/settle-dad.sh if (!no_act_commands && execable("/lib/ifupdown/settle-dad.sh") && (var_true("dad-attempts", ifd)))
 
   down
-    [[ /bin/ip -6 route del default via %gateway% [[metric %metric%]] dev %iface% ]]
-    /bin/ip -6 addr del %address%[[/%netmask%]] [[scope %scope%]] dev %iface%
-    /bin/ip -6 addr flush dev %iface% \
+    [[ /sbin/ip -6 route del default via %gateway% [[metric %metric%]] dev %iface% ]]
+    /sbin/ip -6 addr del %address%[[/%netmask%]] [[scope %scope%]] dev %iface%
+    /sbin/ip -6 addr flush dev %iface% \
     	if (iface_is_link())
-    /bin/ip link set dev %iface% down \
+    /sbin/ip link set dev %iface% down \
 		if (iface_is_link())
 
 method manual
@@ -120,13 +120,13 @@ method manual
 
   up
     -[[/sbin/sysctl -q -e -w net.ipv6.conf.%iface/.//%.mtu=%mtu%]]
-    [[/bin/ip link set dev %iface% address %hwaddress%]]
-    /bin/ip link set dev %iface% up 2>/dev/null || true
+    [[/sbin/ip link set dev %iface% address %hwaddress%]]
+    /sbin/ip link set dev %iface% up 2>/dev/null || true
 
   down
-    /bin/ip -6 addr flush dev %iface% 2>/dev/null || true \
+    /sbin/ip -6 addr flush dev %iface% 2>/dev/null || true \
     	if (iface_is_link())
-    /bin/ip link set dev %iface% down 2>/dev/null || true \
+    /sbin/ip link set dev %iface% down 2>/dev/null || true \
         if (iface_is_link() || !do_all)
 
 method dhcp
@@ -150,9 +150,9 @@ method dhcp
     /sbin/modprobe -q net-pf-10 > /dev/null 2>&1 || true # ignore failure.
     -[[/sbin/sysctl -q -e -w net.ipv6.conf.%iface/.//%.accept_ra=%accept_ra%]]
     -[[/sbin/sysctl -q -e -w net.ipv6.conf.%iface/.//%.autoconf=%autoconf%]]
-    /bin/ip addr flush dev %iface% mngtmpaddr \
+    /sbin/ip addr flush dev %iface% mngtmpaddr \
         if (var_set("accept_ra", ifd) && !var_true("accept_ra", ifd))
-    /bin/ip link set dev %iface% [[address %hwaddress%]] up
+    /sbin/ip link set dev %iface% [[address %hwaddress%]] up
     /lib/ifupdown/wait-for-ll6.sh if (execable("/lib/ifupdown/wait-for-ll6.sh"))
     /sbin/dhclient -6 -v -pf /run/dhclient6.%iface%.pid -lf /var/lib/dhcp/dhclient6.%iface%.leases -I -P -N -df /var/lib/dhcp/dhclient.%iface%.leases %iface% \
         if (execable("/sbin/dhclient") && var_true("request_prefix", ifd))
@@ -167,7 +167,7 @@ method dhcp
     echo 'No DHCPv6 client software found!' >&2; false \
         elsif (1)
 
-    /bin/ip link set dev %iface% down \
+    /sbin/ip link set dev %iface% down \
 		if (iface_is_link())
 
 method v4tunnel
@@ -193,15 +193,15 @@ method v4tunnel
 
   up
     /sbin/modprobe -q net-pf-10 > /dev/null 2>&1 || true # ignore failure.
-    /bin/ip tunnel add %iface% mode sit remote %endpoint% [[local %local%]] \
+    /sbin/ip tunnel add %iface% mode sit remote %endpoint% [[local %local%]] \
        [[ttl %ttl%]]
-    /bin/ip link set %iface% up [[mtu %mtu%]]
-    [[ /bin/ip addr add %address%[[/%netmask%]] dev %iface% [[preferred_lft %preferred-lifetime%]] ]]
-    [[ /bin/ip route add %gateway% dev %iface% ]]
-    [[ /bin/ip route add ::/0 via %gateway% [[metric %metric%]] dev %iface% onlink ]]
+    /sbin/ip link set %iface% up [[mtu %mtu%]]
+    [[ /sbin/ip addr add %address%[[/%netmask%]] dev %iface% [[preferred_lft %preferred-lifetime%]] ]]
+    [[ /sbin/ip route add %gateway% dev %iface% ]]
+    [[ /sbin/ip route add ::/0 via %gateway% [[metric %metric%]] dev %iface% onlink ]]
 
   down
-    /bin/ip tunnel del %iface%
+    /sbin/ip tunnel del %iface%
 
 method 6to4
   description
@@ -222,16 +222,16 @@ method 6to4
 
   up
     /sbin/modprobe -q net-pf-10 > /dev/null 2>&1 || true # ignore failure.
-    /bin/ip tunnel add %iface% mode sit remote any local %local% \
+    /sbin/ip tunnel add %iface% mode sit remote any local %local% \
        [[ttl %ttl%]]
-    /bin/ip link set %iface% up [[mtu %mtu%]]
-    /bin/ip addr add 2002:%hexaddress%::1/16 dev %iface% [[preferred_lft %preferred-lifetime%]]
-    /bin/ip route add 2000::/3 via ::192.88.99.1 [[metric %metric%]] dev %iface%
+    /sbin/ip link set %iface% up [[mtu %mtu%]]
+    /sbin/ip addr add 2002:%hexaddress%::1/16 dev %iface% [[preferred_lft %preferred-lifetime%]]
+    /sbin/ip route add 2000::/3 via ::192.88.99.1 [[metric %metric%]] dev %iface%
 
   down
-    /bin/ip -6 route flush dev %iface%
-    /bin/ip link set dev %iface% down
-    /bin/ip tunnel del %iface%
+    /sbin/ip -6 route flush dev %iface%
+    /sbin/ip link set dev %iface% down
+    /sbin/ip tunnel del %iface%
 
 
 architecture kfreebsd
diff --git a/link.defn b/link.defn
index 004e8e4..5df1afa 100644
--- a/link.defn
+++ b/link.defn
@@ -19,24 +19,24 @@ method none
         if test `cat /sys/class/net/%link%/type` -eq 32; then \
             echo 0x%vlan_id1% > /sys/class/net/%link%/create_child; \
         else \
-            /bin/ip link set up dev %link%; \
-            /bin/ip link add link %link% name %iface0% type vlan id %vlan_id%; \
+            /sbin/ip link set up dev %link%; \
+            /sbin/ip link add link %link% name %iface0% type vlan id %vlan_id%; \
 	fi; \
     fi if (iface_has("."))
-    -/bin/ip link set up dev %iface% 2>/dev/null \
+    -/sbin/ip link set up dev %iface% 2>/dev/null \
 	if (iface_is_lo())
-    [[/bin/ip link set %iface0% alias "%description%"]]
+    [[/sbin/ip link set %iface0% alias "%description%"]]
   down
     if test `cat /sys/class/net/%link%/type` -eq 32; then \
         echo 0x%vlan_id1% > /sys/class/net/%link%/delete_child; \
     else \
-        /bin/ip link del %iface%; \
+        /sbin/ip link del %iface%; \
     fi if (iface_has(".") && !iface_has(":"))
-    -/bin/ip link set down dev %iface% 2>/dev/null \
+    -/sbin/ip link set down dev %iface% 2>/dev/null \
 	if (iface_is_lo())
-    [[-test -n "%description%" && /bin/ip link set %iface0% alias ""]]
+    [[-test -n "%description%" && /sbin/ip link set %iface0% alias ""]]
   rename
-    /bin/ip link set %iface% name %newname%
+    /sbin/ip link set %iface% name %newname%
 
 architecture kfreebsd
 
diff --git a/tests/linux/down.1 b/tests/linux/down.1
index 3155379..2b92336 100644
--- a/tests/linux/down.1
+++ b/tests/linux/down.1
@@ -5,54 +5,54 @@ exit code: 0
 ifdown: configuring interface eth3=eth3 (inet)
 /bin/run-parts --verbose /etc/network/if-down.d
 
-/bin/ip addr del 1.2.3.4/255.255.255.0 broadcast 1.2.3.0 	  dev eth3 label eth3
-/bin/ip -4 addr flush dev eth3
-/bin/ip link set dev eth3 down
+/sbin/ip addr del 1.2.3.4/255.255.255.0 broadcast 1.2.3.0 	  dev eth3 label eth3
+/sbin/ip -4 addr flush dev eth3
+/sbin/ip link set dev eth3 down
 /bin/run-parts --verbose /etc/network/if-post-down.d
 ifdown: configuring interface eth3=eth3 (inet)
 /bin/run-parts --verbose /etc/network/if-down.d
 
-/bin/ip addr del 1.2.3.4/255.255.255.252 broadcast 1.2.3.4 	  dev eth3 label eth3
-/bin/ip -4 addr flush dev eth3
-/bin/ip link set dev eth3 down
+/sbin/ip addr del 1.2.3.4/255.255.255.252 broadcast 1.2.3.4 	  dev eth3 label eth3
+/sbin/ip -4 addr flush dev eth3
+/sbin/ip link set dev eth3 down
 /bin/run-parts --verbose /etc/network/if-post-down.d
 ifdown: configuring interface eth3=eth3 (inet)
 /bin/run-parts --verbose /etc/network/if-down.d
 
-/bin/ip addr del 1.2.3.4/255.255.255.254 broadcast 255.255.255.255 	  dev eth3 label eth3
-/bin/ip -4 addr flush dev eth3
-/bin/ip link set dev eth3 down
+/sbin/ip addr del 1.2.3.4/255.255.255.254 broadcast 255.255.255.255 	  dev eth3 label eth3
+/sbin/ip -4 addr flush dev eth3
+/sbin/ip link set dev eth3 down
 /bin/run-parts --verbose /etc/network/if-post-down.d
 ifdown: configuring interface eth3=eth3 (inet)
 /bin/run-parts --verbose /etc/network/if-down.d
 
-/bin/ip addr del 1.2.3.4/255.255.255.254 broadcast 0.0.0.0 	  dev eth3 label eth3
-/bin/ip -4 addr flush dev eth3
-/bin/ip link set dev eth3 down
+/sbin/ip addr del 1.2.3.4/255.255.255.254 broadcast 0.0.0.0 	  dev eth3 label eth3
+/sbin/ip -4 addr flush dev eth3
+/sbin/ip link set dev eth3 down
 /bin/run-parts --verbose /etc/network/if-post-down.d
 
 ifdown: configuring interface eth2=eth2 (inet)
 /bin/run-parts --verbose /etc/network/if-down.d
 
-/bin/ip addr del 1.2.3.4/255.255.255.128 broadcast 1.2.3.127 	  dev eth2 label eth2
-/bin/ip -4 addr flush dev eth2
-/bin/ip link set dev eth2 down
+/sbin/ip addr del 1.2.3.4/255.255.255.128 broadcast 1.2.3.127 	  dev eth2 label eth2
+/sbin/ip -4 addr flush dev eth2
+/sbin/ip link set dev eth2 down
 /bin/run-parts --verbose /etc/network/if-post-down.d
 
 ifdown: configuring interface eth1=eth1 (inet)
 /bin/run-parts --verbose /etc/network/if-down.d
 
-/bin/ip addr del 1.2.3.4/255.252.0.0 broadcast 1.3.255.255 	  dev eth1 label eth1
-/bin/ip -4 addr flush dev eth1
-/bin/ip link set dev eth1 down
+/sbin/ip addr del 1.2.3.4/255.252.0.0 broadcast 1.3.255.255 	  dev eth1 label eth1
+/sbin/ip -4 addr flush dev eth1
+/sbin/ip link set dev eth1 down
 /bin/run-parts --verbose /etc/network/if-post-down.d
 
 ifdown: configuring interface eth0=eth0 (inet)
 /bin/run-parts --verbose /etc/network/if-down.d
 
-/bin/ip addr del 1.2.3.4/255.255.255.0 broadcast 1.2.3.255 	  dev eth0 label eth0
-/bin/ip -4 addr flush dev eth0
-/bin/ip link set dev eth0 down
+/sbin/ip addr del 1.2.3.4/255.255.255.0 broadcast 1.2.3.255 	  dev eth0 label eth0
+/sbin/ip -4 addr flush dev eth0
+/sbin/ip link set dev eth0 down
 /bin/run-parts --verbose /etc/network/if-post-down.d
 
 /bin/run-parts --verbose /etc/network/if-post-down.d
diff --git a/tests/linux/down.11 b/tests/linux/down.11
index 7a36c2c..f91b8d8 100644
--- a/tests/linux/down.11
+++ b/tests/linux/down.11
@@ -5,14 +5,14 @@ exit code: 0
 ifdown: configuring interface eth0=eth0 (inet)
 /bin/run-parts --verbose /etc/network/if-down.d
 
-/bin/ip addr del 1.2.3.4/255.255.255.0 broadcast 1.2.3.255 	  dev eth0 label eth0
-/bin/ip -4 addr flush dev eth0
-/bin/ip link set dev eth0 down
+/sbin/ip addr del 1.2.3.4/255.255.255.0 broadcast 1.2.3.255 	  dev eth0 label eth0
+/sbin/ip -4 addr flush dev eth0
+/sbin/ip link set dev eth0 down
 /bin/run-parts --verbose /etc/network/if-post-down.d
 
 ifdown: configuring interface lo=lo (inet)
 /bin/run-parts --verbose /etc/network/if-down.d
-/bin/ip link set dev lo down
+/sbin/ip link set dev lo down
 /bin/run-parts --verbose /etc/network/if-post-down.d
 deconfigure lo
 
diff --git a/tests/linux/down.13 b/tests/linux/down.13
index 8e5f27e..cac9eb5 100644
--- a/tests/linux/down.13
+++ b/tests/linux/down.13
@@ -6,6 +6,6 @@ ifdown: couldn't open interfaces file "tests/linux/testcase.13": No such file or
 ifdown: configuring interface lo=lo (inet)
 /bin/run-parts --verbose /etc/network/if-down.d
 /bin/run-parts --verbose /etc/network/if-post-down.d
-/bin/ip link set down dev lo 2>/dev/null
+/sbin/ip link set down dev lo 2>/dev/null
 
 /bin/run-parts --verbose /etc/network/if-post-down.d
diff --git a/tests/linux/down.16 b/tests/linux/down.16
index 12203b9..a7ad6e2 100644
--- a/tests/linux/down.16
+++ b/tests/linux/down.16
@@ -5,52 +5,52 @@ exit code: 0
 ifdown: configuring interface eth3=eth3 (inet)
 /bin/run-parts --verbose /etc/network/if-down.d
 
-/bin/ip addr del 1.2.3.5/255.255.255.0 broadcast 1.2.3.255 	  dev eth3 label eth3
-/bin/ip -4 addr flush dev eth3
-/bin/ip link set dev eth3 down
+/sbin/ip addr del 1.2.3.5/255.255.255.0 broadcast 1.2.3.255 	  dev eth3 label eth3
+/sbin/ip -4 addr flush dev eth3
+/sbin/ip link set dev eth3 down
 /bin/run-parts --verbose /etc/network/if-post-down.d
 
 ifdown: configuring interface eth2=eth2 (inet)
 /bin/run-parts --verbose /etc/network/if-down.d
 
-/bin/ip addr del 1.2.3.5/255.255.255.0 broadcast 1.2.3.255 	  dev eth2 label eth2
-/bin/ip -4 addr flush dev eth2
-/bin/ip link set dev eth2 down
+/sbin/ip addr del 1.2.3.5/255.255.255.0 broadcast 1.2.3.255 	  dev eth2 label eth2
+/sbin/ip -4 addr flush dev eth2
+/sbin/ip link set dev eth2 down
 /bin/run-parts --verbose /etc/network/if-post-down.d
 ifdown: configuring interface eth2=eth2 (inet6)
 /bin/run-parts --verbose /etc/network/if-down.d
 
-/bin/ip -6 addr del 3ffe:ffff:120::fffe:1/64  dev eth2
-/bin/ip -6 addr flush dev eth2
-/bin/ip link set dev eth2 down
+/sbin/ip -6 addr del 3ffe:ffff:120::fffe:1/64  dev eth2
+/sbin/ip -6 addr flush dev eth2
+/sbin/ip link set dev eth2 down
 /bin/run-parts --verbose /etc/network/if-post-down.d
 
 ifdown: configuring interface eth1=eth1 (inet)
 /bin/run-parts --verbose /etc/network/if-down.d
 
-/bin/ip addr del 1.2.3.4/255.255.255.0 broadcast 1.2.3.255 	  dev eth1 label eth1
-/bin/ip -4 addr flush dev eth1
-/bin/ip link set dev eth1 down
+/sbin/ip addr del 1.2.3.4/255.255.255.0 broadcast 1.2.3.255 	  dev eth1 label eth1
+/sbin/ip -4 addr flush dev eth1
+/sbin/ip link set dev eth1 down
 /bin/run-parts --verbose /etc/network/if-post-down.d
 ifdown: configuring interface eth1=eth1 (inet6)
 /bin/run-parts --verbose /etc/network/if-down.d
 
-/bin/ip -6 addr del 3ffe:ffff:120::fffe:1/64  dev eth1
-/bin/ip -6 addr flush dev eth1
-/bin/ip link set dev eth1 down
+/sbin/ip -6 addr del 3ffe:ffff:120::fffe:1/64  dev eth1
+/sbin/ip -6 addr flush dev eth1
+/sbin/ip link set dev eth1 down
 /bin/run-parts --verbose /etc/network/if-post-down.d
 
 ifdown: configuring interface eth0=eth0 (inet)
 /bin/run-parts --verbose /etc/network/if-down.d
 
-/bin/ip addr del 1.2.3.4/255.255.255.0 broadcast 1.2.3.255 	  dev eth0 label eth0
-/bin/ip -4 addr flush dev eth0
-/bin/ip link set dev eth0 down
+/sbin/ip addr del 1.2.3.4/255.255.255.0 broadcast 1.2.3.255 	  dev eth0 label eth0
+/sbin/ip -4 addr flush dev eth0
+/sbin/ip link set dev eth0 down
 /bin/run-parts --verbose /etc/network/if-post-down.d
 
 ifdown: configuring interface lo=lo (inet)
 /bin/run-parts --verbose /etc/network/if-down.d
 /bin/run-parts --verbose /etc/network/if-post-down.d
-/bin/ip link set down dev lo 2>/dev/null
+/sbin/ip link set down dev lo 2>/dev/null
 
 /bin/run-parts --verbose /etc/network/if-post-down.d
diff --git a/tests/linux/down.17 b/tests/linux/down.17
index 2ab4b50..0c73262 100644
--- a/tests/linux/down.17
+++ b/tests/linux/down.17
@@ -4,22 +4,22 @@ exit code: 0
 /bin/run-parts --verbose /etc/network/if-down.d
 ifdown: configuring interface eth2=eth2 (inet)
 /bin/run-parts --verbose /etc/network/if-down.d
-/bin/ip -4 addr flush dev eth2 2>/dev/null || true
+/sbin/ip -4 addr flush dev eth2 2>/dev/null || true
 /bin/run-parts --verbose /etc/network/if-post-down.d
 
 ifdown: configuring interface eth1=eth1 (inet)
 /bin/run-parts --verbose /etc/network/if-down.d
-/bin/ip -4 addr flush dev eth1 2>/dev/null || true
+/sbin/ip -4 addr flush dev eth1 2>/dev/null || true
 /bin/run-parts --verbose /etc/network/if-post-down.d
 
 ifdown: configuring interface eth0=eth0 (inet)
 /bin/run-parts --verbose /etc/network/if-down.d
-/bin/ip -4 addr flush dev eth0 2>/dev/null || true
+/sbin/ip -4 addr flush dev eth0 2>/dev/null || true
 /bin/run-parts --verbose /etc/network/if-post-down.d
 
 ifdown: configuring interface lo=lo (inet)
 /bin/run-parts --verbose /etc/network/if-down.d
 /bin/run-parts --verbose /etc/network/if-post-down.d
-/bin/ip link set down dev lo 2>/dev/null
+/sbin/ip link set down dev lo 2>/dev/null
 
 /bin/run-parts --verbose /etc/network/if-post-down.d
diff --git a/tests/linux/down.18 b/tests/linux/down.18
index c492b13..9f726d8 100644
--- a/tests/linux/down.18
+++ b/tests/linux/down.18
@@ -4,21 +4,21 @@ exit code: 0
 /bin/run-parts --verbose /etc/network/if-down.d
 ifdown: configuring interface eth3=eth3 (inet)
 /bin/run-parts --verbose /etc/network/if-down.d
-/bin/ip -4 addr flush dev eth3 2>/dev/null || true
+/sbin/ip -4 addr flush dev eth3 2>/dev/null || true
 /bin/run-parts --verbose /etc/network/if-post-down.d
 
 ifdown: configuring interface eth2=eth2 (inet)
-/bin/ip -4 addr flush dev eth2 2>/dev/null || true
+/sbin/ip -4 addr flush dev eth2 2>/dev/null || true
 
 ifdown: configuring interface eth1=eth1 (inet)
-/bin/ip -4 addr flush dev eth1 2>/dev/null || true
+/sbin/ip -4 addr flush dev eth1 2>/dev/null || true
 
 ifdown: configuring interface eth0=eth0 (inet)
-/bin/ip -4 addr flush dev eth0 2>/dev/null || true
+/sbin/ip -4 addr flush dev eth0 2>/dev/null || true
 
 ifdown: configuring interface lo=lo (inet)
 /bin/run-parts --verbose /etc/network/if-down.d
 /bin/run-parts --verbose /etc/network/if-post-down.d
-/bin/ip link set down dev lo 2>/dev/null
+/sbin/ip link set down dev lo 2>/dev/null
 
 /bin/run-parts --verbose /etc/network/if-post-down.d
diff --git a/tests/linux/down.2 b/tests/linux/down.2
index 6a2d464..4bfa35d 100644
--- a/tests/linux/down.2
+++ b/tests/linux/down.2
@@ -5,49 +5,49 @@ exit code: 0
 ifdown: configuring interface eth5=eth5 (inet)
 /bin/run-parts --verbose /etc/network/if-down.d
 
-/bin/ip addr del 1.8.9.10/255.255.255.0 broadcast 1.8.9.255 	  dev eth5 label eth5
-/bin/ip -4 addr flush dev eth5
-/bin/ip link set dev eth5 down
+/sbin/ip addr del 1.8.9.10/255.255.255.0 broadcast 1.8.9.255 	  dev eth5 label eth5
+/sbin/ip -4 addr flush dev eth5
+/sbin/ip link set dev eth5 down
 /bin/run-parts --verbose /etc/network/if-post-down.d
 
 ifdown: configuring interface eth4=eth4 (inet)
 /bin/run-parts --verbose /etc/network/if-down.d
 
-/bin/ip addr del 1.7.8.9/255.255.255.0 broadcast 1.7.8.255 	  dev eth4 label eth4
-/bin/ip -4 addr flush dev eth4
-/bin/ip link set dev eth4 down
+/sbin/ip addr del 1.7.8.9/255.255.255.0 broadcast 1.7.8.255 	  dev eth4 label eth4
+/sbin/ip -4 addr flush dev eth4
+/sbin/ip link set dev eth4 down
 /bin/run-parts --verbose /etc/network/if-post-down.d
 
 ifdown: configuring interface eth3=eth3 (inet)
 /bin/run-parts --verbose /etc/network/if-down.d
 
-/bin/ip addr del 1.5.6.7/255.255.255.0 broadcast 1.5.6.255 	  dev eth3 label eth3
-/bin/ip -4 addr flush dev eth3
-/bin/ip link set dev eth3 down
+/sbin/ip addr del 1.5.6.7/255.255.255.0 broadcast 1.5.6.255 	  dev eth3 label eth3
+/sbin/ip -4 addr flush dev eth3
+/sbin/ip link set dev eth3 down
 /bin/run-parts --verbose /etc/network/if-post-down.d
 
 ifdown: configuring interface eth2=eth2 (inet)
 /bin/run-parts --verbose /etc/network/if-down.d
 
-/bin/ip addr del 1.4.5.6/255.255.255.0 broadcast 1.4.5.255 	  dev eth2 label eth2
-/bin/ip -4 addr flush dev eth2
-/bin/ip link set dev eth2 down
+/sbin/ip addr del 1.4.5.6/255.255.255.0 broadcast 1.4.5.255 	  dev eth2 label eth2
+/sbin/ip -4 addr flush dev eth2
+/sbin/ip link set dev eth2 down
 /bin/run-parts --verbose /etc/network/if-post-down.d
 
 ifdown: configuring interface eth1=eth1 (inet)
 /bin/run-parts --verbose /etc/network/if-down.d
 
-/bin/ip addr del 1.3.4.5/255.255.255.0 broadcast 1.3.4.255 	  dev eth1 label eth1
-/bin/ip -4 addr flush dev eth1
-/bin/ip link set dev eth1 down
+/sbin/ip addr del 1.3.4.5/255.255.255.0 broadcast 1.3.4.255 	  dev eth1 label eth1
+/sbin/ip -4 addr flush dev eth1
+/sbin/ip link set dev eth1 down
 /bin/run-parts --verbose /etc/network/if-post-down.d
 
 ifdown: configuring interface eth0=eth0 (inet)
 /bin/run-parts --verbose /etc/network/if-down.d
 
-/bin/ip addr del 1.2.3.4/255.255.255.0 broadcast 1.2.3.255 	  dev eth0 label eth0
-/bin/ip -4 addr flush dev eth0
-/bin/ip link set dev eth0 down
+/sbin/ip addr del 1.2.3.4/255.255.255.0 broadcast 1.2.3.255 	  dev eth0 label eth0
+/sbin/ip -4 addr flush dev eth0
+/sbin/ip link set dev eth0 down
 /bin/run-parts --verbose /etc/network/if-post-down.d
 
 /bin/run-parts --verbose /etc/network/if-post-down.d
diff --git a/tests/linux/down.3 b/tests/linux/down.3
index afec8d9..7f51701 100644
--- a/tests/linux/down.3
+++ b/tests/linux/down.3
@@ -4,17 +4,17 @@ exit code: 0
 /bin/run-parts --verbose /etc/network/if-down.d
 ifdown: configuring interface eth1=eth1 (inet6)
 /bin/run-parts --verbose /etc/network/if-down.d
- /bin/ip -6 route del default via 3ffe:ffff:100:f102::fff  dev eth1 
-/bin/ip -6 addr del 3ffe:ffff:100:f102::1/64  dev eth1
-/bin/ip -6 addr flush dev eth1
-/bin/ip link set dev eth1 down
+ /sbin/ip -6 route del default via 3ffe:ffff:100:f102::fff  dev eth1 
+/sbin/ip -6 addr del 3ffe:ffff:100:f102::1/64  dev eth1
+/sbin/ip -6 addr flush dev eth1
+/sbin/ip link set dev eth1 down
 /bin/run-parts --verbose /etc/network/if-post-down.d
 ifdown: configuring interface eth1=eth1 (inet6)
 /bin/run-parts --verbose /etc/network/if-down.d
- /bin/ip -6 route del default via 3ffe:ffff:100:f102::fff  dev eth1 
-/bin/ip -6 addr del 3ffe:ffff:100:f102::6/64  dev eth1
-/bin/ip -6 addr flush dev eth1
-/bin/ip link set dev eth1 down
+ /sbin/ip -6 route del default via 3ffe:ffff:100:f102::fff  dev eth1 
+/sbin/ip -6 addr del 3ffe:ffff:100:f102::6/64  dev eth1
+/sbin/ip -6 addr flush dev eth1
+/sbin/ip link set dev eth1 down
 /bin/run-parts --verbose /etc/network/if-post-down.d
 
 /bin/run-parts --verbose /etc/network/if-post-down.d
diff --git a/tests/linux/down.4 b/tests/linux/down.4
index 01fea9a..038b7f0 100644
--- a/tests/linux/down.4
+++ b/tests/linux/down.4
@@ -4,8 +4,8 @@ exit code: 0
 ifdown: configuring interface eth0=work (inet)
 /bin/run-parts --verbose /etc/network/if-down.d
 
-/bin/ip addr del 1.2.3.4/255.255.255.0 broadcast 1.2.3.255 	  dev eth0 label eth0
-/bin/ip -4 addr flush dev eth0
-/bin/ip link set dev eth0 down
+/sbin/ip addr del 1.2.3.4/255.255.255.0 broadcast 1.2.3.255 	  dev eth0 label eth0
+/sbin/ip -4 addr flush dev eth0
+/sbin/ip link set dev eth0 down
 /bin/run-parts --verbose /etc/network/if-post-down.d
 
diff --git a/tests/linux/down.5 b/tests/linux/down.5
index c1a2529..be4dc84 100644
--- a/tests/linux/down.5
+++ b/tests/linux/down.5
@@ -5,9 +5,9 @@ exit code: 0
 ifdown: configuring interface eth0=eth0 (inet)
 /bin/run-parts --verbose /etc/network/if-down.d
 
-/bin/ip addr del 1.2.3.4/255.255.255.0 broadcast 1.2.3.255 	  dev eth0 label eth0
-/bin/ip -4 addr flush dev eth0
-/bin/ip link set dev eth0 down
+/sbin/ip addr del 1.2.3.4/255.255.255.0 broadcast 1.2.3.255 	  dev eth0 label eth0
+/sbin/ip -4 addr flush dev eth0
+/sbin/ip link set dev eth0 down
 /bin/run-parts --verbose /etc/network/if-post-down.d
 
 /bin/run-parts --verbose /etc/network/if-post-down.d
diff --git a/tests/linux/down.6 b/tests/linux/down.6
index c1a2529..be4dc84 100644
--- a/tests/linux/down.6
+++ b/tests/linux/down.6
@@ -5,9 +5,9 @@ exit code: 0
 ifdown: configuring interface eth0=eth0 (inet)
 /bin/run-parts --verbose /etc/network/if-down.d
 
-/bin/ip addr del 1.2.3.4/255.255.255.0 broadcast 1.2.3.255 	  dev eth0 label eth0
-/bin/ip -4 addr flush dev eth0
-/bin/ip link set dev eth0 down
+/sbin/ip addr del 1.2.3.4/255.255.255.0 broadcast 1.2.3.255 	  dev eth0 label eth0
+/sbin/ip -4 addr flush dev eth0
+/sbin/ip link set dev eth0 down
 /bin/run-parts --verbose /etc/network/if-post-down.d
 
 /bin/run-parts --verbose /etc/network/if-post-down.d
diff --git a/tests/linux/down.7 b/tests/linux/down.7
index a286b7e..229387b 100644
--- a/tests/linux/down.7
+++ b/tests/linux/down.7
@@ -4,62 +4,62 @@ exit code: 0
 /bin/run-parts --verbose /etc/network/if-down.d
 ifdown: configuring interface tunnel=tunnel (inet6)
 /bin/run-parts --verbose /etc/network/if-down.d
-/bin/ip -6 route flush dev tunnel
-/bin/ip link set dev tunnel down
-/bin/ip tunnel del tunnel
+/sbin/ip -6 route flush dev tunnel
+/sbin/ip link set dev tunnel down
+/sbin/ip tunnel del tunnel
 /bin/run-parts --verbose /etc/network/if-post-down.d
 
 ifdown: configuring interface br0.0202=br0.0202 (inet)
 /bin/run-parts --verbose /etc/network/if-down.d
 /bin/run-parts --verbose /etc/network/if-post-down.d
-if test `cat /sys/class/net/br0/type` -eq 32; then         echo 0x0202 > /sys/class/net/br0/delete_child;     else         /bin/ip link del br0.0202;     fi
+if test `cat /sys/class/net/br0/type` -eq 32; then         echo 0x0202 > /sys/class/net/br0/delete_child;     else         /sbin/ip link del br0.0202;     fi
 
 ifdown: configuring interface br0.0201=br0.0201 (inet)
 /bin/run-parts --verbose /etc/network/if-down.d
 /bin/run-parts --verbose /etc/network/if-post-down.d
-if test `cat /sys/class/net/br0/type` -eq 32; then         echo 0x0201 > /sys/class/net/br0/delete_child;     else         /bin/ip link del br0.0201;     fi
+if test `cat /sys/class/net/br0/type` -eq 32; then         echo 0x0201 > /sys/class/net/br0/delete_child;     else         /sbin/ip link del br0.0201;     fi
 
 ifdown: configuring interface eth0.0201=eth0.0201 (inet)
 /bin/run-parts --verbose /etc/network/if-down.d
 
-/bin/ip addr del 192.168.0.1/255.255.255.128 broadcast 192.168.0.127 	  dev eth0.0201 label eth0.0201
+/sbin/ip addr del 192.168.0.1/255.255.255.128 broadcast 192.168.0.127 	  dev eth0.0201 label eth0.0201
 /bin/run-parts --verbose /etc/network/if-post-down.d
-if test `cat /sys/class/net/eth0/type` -eq 32; then         echo 0x0201 > /sys/class/net/eth0/delete_child;     else         /bin/ip link del eth0.0201;     fi
+if test `cat /sys/class/net/eth0/type` -eq 32; then         echo 0x0201 > /sys/class/net/eth0/delete_child;     else         /sbin/ip link del eth0.0201;     fi
 
 ifdown: configuring interface eth0.1=eth0.1 (inet6)
 /bin/run-parts --verbose /etc/network/if-down.d
 
-/bin/ip -6 addr del 3ffe:ffff:120:f101::1/64  dev eth0.1
+/sbin/ip -6 addr del 3ffe:ffff:120:f101::1/64  dev eth0.1
 /bin/run-parts --verbose /etc/network/if-post-down.d
-if test `cat /sys/class/net/eth0/type` -eq 32; then         echo 0x1 > /sys/class/net/eth0/delete_child;     else         /bin/ip link del eth0.1;     fi
+if test `cat /sys/class/net/eth0/type` -eq 32; then         echo 0x1 > /sys/class/net/eth0/delete_child;     else         /sbin/ip link del eth0.1;     fi
 
 ifdown: configuring interface eth0.1=eth0.1 (inet6)
 /bin/run-parts --verbose /etc/network/if-down.d
 
-/bin/ip -6 addr del 3ffe:ffff:120:f101::1/64  dev eth0.1
+/sbin/ip -6 addr del 3ffe:ffff:120:f101::1/64  dev eth0.1
 /bin/run-parts --verbose /etc/network/if-post-down.d
-if test `cat /sys/class/net/eth0/type` -eq 32; then         echo 0x1 > /sys/class/net/eth0/delete_child;     else         /bin/ip link del eth0.1;     fi
+if test `cat /sys/class/net/eth0/type` -eq 32; then         echo 0x1 > /sys/class/net/eth0/delete_child;     else         /sbin/ip link del eth0.1;     fi
 
 ifdown: configuring interface eth0.0201=eth0.0201 (inet)
 /bin/run-parts --verbose /etc/network/if-down.d
 
-/bin/ip addr del 192.168.0.1/255.255.255.128 broadcast 192.168.0.127 	  dev eth0.0201 label eth0.0201
+/sbin/ip addr del 192.168.0.1/255.255.255.128 broadcast 192.168.0.127 	  dev eth0.0201 label eth0.0201
 /bin/run-parts --verbose /etc/network/if-post-down.d
-if test `cat /sys/class/net/eth0/type` -eq 32; then         echo 0x0201 > /sys/class/net/eth0/delete_child;     else         /bin/ip link del eth0.0201;     fi
+if test `cat /sys/class/net/eth0/type` -eq 32; then         echo 0x0201 > /sys/class/net/eth0/delete_child;     else         /sbin/ip link del eth0.0201;     fi
 
 ifdown: configuring interface eth0=eth0 (inet)
 /bin/run-parts --verbose /etc/network/if-down.d
 
-/bin/ip addr del 1.2.3.4/255.255.255.0 broadcast 1.2.3.255 	  dev eth0 label eth0
-/bin/ip -4 addr flush dev eth0
-/bin/ip link set dev eth0 down
+/sbin/ip addr del 1.2.3.4/255.255.255.0 broadcast 1.2.3.255 	  dev eth0 label eth0
+/sbin/ip -4 addr flush dev eth0
+/sbin/ip link set dev eth0 down
 /bin/run-parts --verbose /etc/network/if-post-down.d
 ifdown: configuring interface eth0=eth0 (inet6)
 /bin/run-parts --verbose /etc/network/if-down.d
 
-/bin/ip -6 addr del 3ffe:ffff:100:f101::1/64  dev eth0
-/bin/ip -6 addr flush dev eth0
-/bin/ip link set dev eth0 down
+/sbin/ip -6 addr del 3ffe:ffff:100:f101::1/64  dev eth0
+/sbin/ip -6 addr flush dev eth0
+/sbin/ip link set dev eth0 down
 /bin/run-parts --verbose /etc/network/if-post-down.d
 
 /bin/run-parts --verbose /etc/network/if-post-down.d
diff --git a/tests/linux/down.8 b/tests/linux/down.8
index 430eab0..b730d60 100644
--- a/tests/linux/down.8
+++ b/tests/linux/down.8
@@ -5,28 +5,28 @@ exit code: 0
 ifdown: configuring interface eth2.2:3=eth2.2:3 (inet)
 /bin/run-parts --verbose /etc/network/if-down.d
 
-/bin/ip addr del 3.4.5.6/255.255.254.0 broadcast 3.4.5.255 	  dev eth2.2:3 label eth2.2:3
+/sbin/ip addr del 3.4.5.6/255.255.254.0 broadcast 3.4.5.255 	  dev eth2.2:3 label eth2.2:3
 /bin/run-parts --verbose /etc/network/if-post-down.d
 
 ifdown: configuring interface eth2.2=eth2.2 (inet)
 /bin/run-parts --verbose /etc/network/if-down.d
 
-/bin/ip addr del 2.3.4.5/255.255.255.0 broadcast 2.3.4.255 	  dev eth2.2 label eth2.2
+/sbin/ip addr del 2.3.4.5/255.255.255.0 broadcast 2.3.4.255 	  dev eth2.2 label eth2.2
 /bin/run-parts --verbose /etc/network/if-post-down.d
-if test `cat /sys/class/net/eth2/type` -eq 32; then         echo 0x2 > /sys/class/net/eth2/delete_child;     else         /bin/ip link del eth2.2;     fi
+if test `cat /sys/class/net/eth2/type` -eq 32; then         echo 0x2 > /sys/class/net/eth2/delete_child;     else         /sbin/ip link del eth2.2;     fi
 
 ifdown: configuring interface eth1:1=eth1:1 (inet)
 /bin/run-parts --verbose /etc/network/if-down.d
 
-/bin/ip addr del 1.5.3.4/255.255.255.0 broadcast 1.5.3.255 	  dev eth1:1 label eth1:1
+/sbin/ip addr del 1.5.3.4/255.255.255.0 broadcast 1.5.3.255 	  dev eth1:1 label eth1:1
 /bin/run-parts --verbose /etc/network/if-post-down.d
 
 ifdown: configuring interface eth1=eth1 (inet)
 /bin/run-parts --verbose /etc/network/if-down.d
 
-/bin/ip addr del 1.2.3.4/255.255.255.0 broadcast 1.2.3.255 	  dev eth1 label eth1
-/bin/ip -4 addr flush dev eth1
-/bin/ip link set dev eth1 down
+/sbin/ip addr del 1.2.3.4/255.255.255.0 broadcast 1.2.3.255 	  dev eth1 label eth1
+/sbin/ip -4 addr flush dev eth1
+/sbin/ip link set dev eth1 down
 /bin/run-parts --verbose /etc/network/if-post-down.d
 
 /bin/run-parts --verbose /etc/network/if-post-down.d
diff --git a/tests/linux/down.9 b/tests/linux/down.9
index 496e477..383a640 100644
--- a/tests/linux/down.9
+++ b/tests/linux/down.9
@@ -3,8 +3,8 @@ exit code: 0
 ====stderr====
 ifdown: configuring interface tunnel=tunnel (inet6)
 /bin/run-parts --verbose /etc/network/if-down.d
-/bin/ip -6 route flush dev tunnel
-/bin/ip link set dev tunnel down
-/bin/ip tunnel del tunnel
+/sbin/ip -6 route flush dev tunnel
+/sbin/ip link set dev tunnel down
+/sbin/ip tunnel del tunnel
 /bin/run-parts --verbose /etc/network/if-post-down.d
 
diff --git a/tests/linux/up.1 b/tests/linux/up.1
index b33ec46..06e2923 100644
--- a/tests/linux/up.1
+++ b/tests/linux/up.1
@@ -5,8 +5,8 @@ exit code: 0
 
 ifup: configuring interface eth0=eth0 (inet)
 /bin/run-parts --exit-on-error --verbose /etc/network/if-pre-up.d
-/bin/ip addr add 1.2.3.4/255.255.255.0 broadcast 1.2.3.255 	  dev eth0 label eth0
-/bin/ip link set dev eth0   up
+/sbin/ip addr add 1.2.3.4/255.255.255.0 broadcast 1.2.3.255 	  dev eth0 label eth0
+/sbin/ip link set dev eth0   up
 
 echo hi
 echo hello
@@ -14,8 +14,8 @@ echo hello
 
 ifup: configuring interface eth1=eth1 (inet)
 /bin/run-parts --exit-on-error --verbose /etc/network/if-pre-up.d
-/bin/ip addr add 1.2.3.4/255.252.0.0 broadcast 1.3.255.255 	  dev eth1 label eth1
-/bin/ip link set dev eth1   up
+/sbin/ip addr add 1.2.3.4/255.252.0.0 broadcast 1.3.255.255 	  dev eth1 label eth1
+/sbin/ip link set dev eth1   up
 
 echo hi
 echo hello
@@ -23,8 +23,8 @@ echo hello
 
 ifup: configuring interface eth2=eth2 (inet)
 /bin/run-parts --exit-on-error --verbose /etc/network/if-pre-up.d
-/bin/ip addr add 1.2.3.4/255.255.255.128 broadcast 1.2.3.127 	  dev eth2 label eth2
-/bin/ip link set dev eth2   up
+/sbin/ip addr add 1.2.3.4/255.255.255.128 broadcast 1.2.3.127 	  dev eth2 label eth2
+/sbin/ip link set dev eth2   up
 
 echo hi
 echo hello
@@ -32,29 +32,29 @@ echo hello
 
 ifup: configuring interface eth3=eth3 (inet)
 /bin/run-parts --exit-on-error --verbose /etc/network/if-pre-up.d
-/bin/ip addr add 1.2.3.4/255.255.255.0 broadcast 1.2.3.0 	  dev eth3 label eth3
-/bin/ip link set dev eth3   up
+/sbin/ip addr add 1.2.3.4/255.255.255.0 broadcast 1.2.3.0 	  dev eth3 label eth3
+/sbin/ip link set dev eth3   up
 
 true
 /bin/run-parts --exit-on-error --verbose /etc/network/if-up.d
 ifup: configuring interface eth3=eth3 (inet)
 /bin/run-parts --exit-on-error --verbose /etc/network/if-pre-up.d
-/bin/ip addr add 1.2.3.4/255.255.255.252 broadcast 1.2.3.4 	  dev eth3 label eth3
-/bin/ip link set dev eth3   up
+/sbin/ip addr add 1.2.3.4/255.255.255.252 broadcast 1.2.3.4 	  dev eth3 label eth3
+/sbin/ip link set dev eth3   up
 
 true
 /bin/run-parts --exit-on-error --verbose /etc/network/if-up.d
 ifup: configuring interface eth3=eth3 (inet)
 /bin/run-parts --exit-on-error --verbose /etc/network/if-pre-up.d
-/bin/ip addr add 1.2.3.4/255.255.255.254 broadcast 255.255.255.255 	  dev eth3 label eth3
-/bin/ip link set dev eth3   up
+/sbin/ip addr add 1.2.3.4/255.255.255.254 broadcast 255.255.255.255 	  dev eth3 label eth3
+/sbin/ip link set dev eth3   up
 
 true
 /bin/run-parts --exit-on-error --verbose /etc/network/if-up.d
 ifup: configuring interface eth3=eth3 (inet)
 /bin/run-parts --exit-on-error --verbose /etc/network/if-pre-up.d
-/bin/ip addr add 1.2.3.4/255.255.255.254 broadcast 0.0.0.0 	  dev eth3 label eth3
-/bin/ip link set dev eth3   up
+/sbin/ip addr add 1.2.3.4/255.255.255.254 broadcast 0.0.0.0 	  dev eth3 label eth3
+/sbin/ip link set dev eth3   up
 
 true
 /bin/run-parts --exit-on-error --verbose /etc/network/if-up.d
diff --git a/tests/linux/up.11 b/tests/linux/up.11
index 2707869..be6b803 100644
--- a/tests/linux/up.11
+++ b/tests/linux/up.11
@@ -6,13 +6,13 @@ exit code: 0
 ifup: configuring interface lo=lo (inet)
 configure lo
 /bin/run-parts --exit-on-error --verbose /etc/network/if-pre-up.d
-/bin/ip link set dev lo up
+/sbin/ip link set dev lo up
 /bin/run-parts --exit-on-error --verbose /etc/network/if-up.d
 
 ifup: configuring interface eth0=eth0 (inet)
 /bin/run-parts --exit-on-error --verbose /etc/network/if-pre-up.d
-/bin/ip addr add 1.2.3.4/255.255.255.0 broadcast 1.2.3.255 	  dev eth0 label eth0
-/bin/ip link set dev eth0   up
+/sbin/ip addr add 1.2.3.4/255.255.255.0 broadcast 1.2.3.255 	  dev eth0 label eth0
+/sbin/ip link set dev eth0   up
 
 /bin/run-parts --exit-on-error --verbose /etc/network/if-up.d
 /bin/run-parts --exit-on-error --verbose /etc/network/if-up.d
diff --git a/tests/linux/up.13 b/tests/linux/up.13
index 88e2e8a..1f75f58 100644
--- a/tests/linux/up.13
+++ b/tests/linux/up.13
@@ -3,7 +3,7 @@ exit code: 0
 ====stderr====
 ifup: couldn't open interfaces file "tests/linux/testcase.13": No such file or directory
 /bin/run-parts --exit-on-error --verbose /etc/network/if-pre-up.d
-/bin/ip link set up dev lo 2>/dev/null
+/sbin/ip link set up dev lo 2>/dev/null
 
 ifup: configuring interface lo=lo (inet)
 /bin/run-parts --exit-on-error --verbose /etc/network/if-pre-up.d
diff --git a/tests/linux/up.16 b/tests/linux/up.16
index 59d17e9..6c4ab42 100644
--- a/tests/linux/up.16
+++ b/tests/linux/up.16
@@ -2,7 +2,7 @@ exit code: 0
 ====stdout====
 ====stderr====
 /bin/run-parts --exit-on-error --verbose /etc/network/if-pre-up.d
-/bin/ip link set up dev lo 2>/dev/null
+/sbin/ip link set up dev lo 2>/dev/null
 
 ifup: configuring interface lo=lo (inet)
 /bin/run-parts --exit-on-error --verbose /etc/network/if-pre-up.d
@@ -10,15 +10,15 @@ ifup: configuring interface lo=lo (inet)
 
 ifup: configuring interface eth0=eth0 (inet)
 /bin/run-parts --exit-on-error --verbose /etc/network/if-pre-up.d
-/bin/ip addr add 1.2.3.4/255.255.255.0 broadcast 1.2.3.255 	  dev eth0 label eth0
-/bin/ip link set dev eth0   up
+/sbin/ip addr add 1.2.3.4/255.255.255.0 broadcast 1.2.3.255 	  dev eth0 label eth0
+/sbin/ip link set dev eth0   up
 
 /bin/run-parts --exit-on-error --verbose /etc/network/if-up.d
 
 ifup: configuring interface eth1=eth1 (inet)
 /bin/run-parts --exit-on-error --verbose /etc/network/if-pre-up.d
-/bin/ip addr add 1.2.3.4/255.255.255.0 broadcast 1.2.3.255 	  dev eth1 label eth1
-/bin/ip link set dev eth1 mtu 1500 address 12:34:56:89:0a:bc up
+/sbin/ip addr add 1.2.3.4/255.255.255.0 broadcast 1.2.3.255 	  dev eth1 label eth1
+/sbin/ip link set dev eth1 mtu 1500 address 12:34:56:89:0a:bc up
 
 /bin/run-parts --exit-on-error --verbose /etc/network/if-up.d
 ifup: configuring interface eth1=eth1 (inet6)
@@ -28,15 +28,15 @@ ifup: configuring interface eth1=eth1 (inet6)
 
 /sbin/sysctl -q -e -w net.ipv6.conf.eth1.autoconf=0
 /sbin/sysctl -q -e -w net.ipv6.conf.eth1.mtu=1492
-/bin/ip link set dev eth1 address 12:34:ff:fe:0a:bc up
-/bin/ip -6 addr add 3ffe:ffff:120::fffe:1/64  dev eth1 
+/sbin/ip link set dev eth1 address 12:34:ff:fe:0a:bc up
+/sbin/ip -6 addr add 3ffe:ffff:120::fffe:1/64  dev eth1 
 
 /bin/run-parts --exit-on-error --verbose /etc/network/if-up.d
 
 ifup: configuring interface eth2=eth2 (inet)
 /bin/run-parts --exit-on-error --verbose /etc/network/if-pre-up.d
-/bin/ip addr add 1.2.3.5/255.255.255.0 broadcast 1.2.3.255 	  dev eth2 label eth2
-/bin/ip link set dev eth2 mtu 1500 address 12:34:56:89:0a:bc up
+/sbin/ip addr add 1.2.3.5/255.255.255.0 broadcast 1.2.3.255 	  dev eth2 label eth2
+/sbin/ip link set dev eth2 mtu 1500 address 12:34:56:89:0a:bc up
 
 /bin/run-parts --exit-on-error --verbose /etc/network/if-up.d
 ifup: configuring interface eth2=eth2 (inet6)
@@ -46,15 +46,15 @@ ifup: configuring interface eth2=eth2 (inet6)
 
 /sbin/sysctl -q -e -w net.ipv6.conf.eth2.autoconf=0
 /sbin/sysctl -q -e -w net.ipv6.conf.eth2.mtu=1492
-/bin/ip link set dev eth2 address 12:34:ff:fe:0a:bc up
-/bin/ip -6 addr add 3ffe:ffff:120::fffe:1/64  dev eth2 
+/sbin/ip link set dev eth2 address 12:34:ff:fe:0a:bc up
+/sbin/ip -6 addr add 3ffe:ffff:120::fffe:1/64  dev eth2 
 
 /bin/run-parts --exit-on-error --verbose /etc/network/if-up.d
 
 ifup: configuring interface eth3=eth3 (inet)
 /bin/run-parts --exit-on-error --verbose /etc/network/if-pre-up.d
-/bin/ip addr add 1.2.3.5/255.255.255.0 broadcast 1.2.3.255 	  dev eth3 label eth3
-/bin/ip link set dev eth3 mtu 1500 address 12:34:56:89:0a:bc up
+/sbin/ip addr add 1.2.3.5/255.255.255.0 broadcast 1.2.3.255 	  dev eth3 label eth3
+/sbin/ip link set dev eth3 mtu 1500 address 12:34:56:89:0a:bc up
 
 /bin/run-parts --exit-on-error --verbose /etc/network/if-up.d
 /bin/run-parts --exit-on-error --verbose /etc/network/if-up.d
diff --git a/tests/linux/up.17 b/tests/linux/up.17
index fe14ade..3a52398 100644
--- a/tests/linux/up.17
+++ b/tests/linux/up.17
@@ -2,30 +2,30 @@ exit code: 0
 ====stdout====
 ====stderr====
 /bin/run-parts --exit-on-error --verbose /etc/network/if-pre-up.d
-/bin/ip link set up dev lo 2>/dev/null
+/sbin/ip link set up dev lo 2>/dev/null
 
 ifup: configuring interface lo=lo (inet)
 /bin/run-parts --exit-on-error --verbose /etc/network/if-pre-up.d
 /bin/run-parts --exit-on-error --verbose /etc/network/if-up.d
-/bin/ip link set eth0 alias "foo"
+/sbin/ip link set eth0 alias "foo"
 ifup: configuring interface eth0=eth0 (inet)
 /bin/run-parts --exit-on-error --verbose /etc/network/if-pre-up.d
 
 
-/bin/ip link set dev eth0 up 2>/dev/null || true
+/sbin/ip link set dev eth0 up 2>/dev/null || true
 /bin/run-parts --exit-on-error --verbose /etc/network/if-up.d
-/bin/ip link set eth1 alias "foo bar with spaces"
+/sbin/ip link set eth1 alias "foo bar with spaces"
 ifup: configuring interface eth1=eth1 (inet)
 /bin/run-parts --exit-on-error --verbose /etc/network/if-pre-up.d
 
 
-/bin/ip link set dev eth1 up 2>/dev/null || true
+/sbin/ip link set dev eth1 up 2>/dev/null || true
 /bin/run-parts --exit-on-error --verbose /etc/network/if-up.d
-/bin/ip link set eth2 alias "works with ipv6 too"
+/sbin/ip link set eth2 alias "works with ipv6 too"
 ifup: configuring interface eth2=eth2 (inet)
 /bin/run-parts --exit-on-error --verbose /etc/network/if-pre-up.d
 
 
-/bin/ip link set dev eth2 up 2>/dev/null || true
+/sbin/ip link set dev eth2 up 2>/dev/null || true
 /bin/run-parts --exit-on-error --verbose /etc/network/if-up.d
 /bin/run-parts --exit-on-error --verbose /etc/network/if-up.d
diff --git a/tests/linux/up.18 b/tests/linux/up.18
index a4e37ec..28627bc 100644
--- a/tests/linux/up.18
+++ b/tests/linux/up.18
@@ -2,7 +2,7 @@ exit code: 0
 ====stdout====
 ====stderr====
 /bin/run-parts --exit-on-error --verbose /etc/network/if-pre-up.d
-/bin/ip link set up dev lo 2>/dev/null
+/sbin/ip link set up dev lo 2>/dev/null
 
 ifup: configuring interface lo=lo (inet)
 /bin/run-parts --exit-on-error --verbose /etc/network/if-pre-up.d
@@ -11,22 +11,22 @@ ifup: configuring interface lo=lo (inet)
 ifup: configuring interface eth0=eth0 (inet)
 
 
-/bin/ip link set dev eth0 up 2>/dev/null || true
+/sbin/ip link set dev eth0 up 2>/dev/null || true
 
 ifup: configuring interface eth1=eth1 (inet)
 
 
-/bin/ip link set dev eth1 up 2>/dev/null || true
+/sbin/ip link set dev eth1 up 2>/dev/null || true
 
 ifup: configuring interface eth2=eth2 (inet)
 
 
-/bin/ip link set dev eth2 up 2>/dev/null || true
+/sbin/ip link set dev eth2 up 2>/dev/null || true
 
 ifup: configuring interface eth3=eth3 (inet)
 /bin/run-parts --exit-on-error --verbose /etc/network/if-pre-up.d
 
 
-/bin/ip link set dev eth3 up 2>/dev/null || true
+/sbin/ip link set dev eth3 up 2>/dev/null || true
 /bin/run-parts --exit-on-error --verbose /etc/network/if-up.d
 /bin/run-parts --exit-on-error --verbose /etc/network/if-up.d
diff --git a/tests/linux/up.2 b/tests/linux/up.2
index eda3fe8..d80702f 100644
--- a/tests/linux/up.2
+++ b/tests/linux/up.2
@@ -5,43 +5,43 @@ exit code: 0
 
 ifup: configuring interface eth0=eth0 (inet)
 /bin/run-parts --exit-on-error --verbose /etc/network/if-pre-up.d
-/bin/ip addr add 1.2.3.4/255.255.255.0 broadcast 1.2.3.255 	  dev eth0 label eth0
-/bin/ip link set dev eth0   up
+/sbin/ip addr add 1.2.3.4/255.255.255.0 broadcast 1.2.3.255 	  dev eth0 label eth0
+/sbin/ip link set dev eth0   up
 
 /bin/run-parts --exit-on-error --verbose /etc/network/if-up.d
 
 ifup: configuring interface eth1=eth1 (inet)
 /bin/run-parts --exit-on-error --verbose /etc/network/if-pre-up.d
-/bin/ip addr add 1.3.4.5/255.255.255.0 broadcast 1.3.4.255 	  dev eth1 label eth1
-/bin/ip link set dev eth1   up
+/sbin/ip addr add 1.3.4.5/255.255.255.0 broadcast 1.3.4.255 	  dev eth1 label eth1
+/sbin/ip link set dev eth1   up
 
 /bin/run-parts --exit-on-error --verbose /etc/network/if-up.d
 
 ifup: configuring interface eth2=eth2 (inet)
 /bin/run-parts --exit-on-error --verbose /etc/network/if-pre-up.d
-/bin/ip addr add 1.4.5.6/255.255.255.0 broadcast 1.4.5.255 	  dev eth2 label eth2
-/bin/ip link set dev eth2   up
+/sbin/ip addr add 1.4.5.6/255.255.255.0 broadcast 1.4.5.255 	  dev eth2 label eth2
+/sbin/ip link set dev eth2   up
 
 /bin/run-parts --exit-on-error --verbose /etc/network/if-up.d
 
 ifup: configuring interface eth3=eth3 (inet)
 /bin/run-parts --exit-on-error --verbose /etc/network/if-pre-up.d
-/bin/ip addr add 1.5.6.7/255.255.255.0 broadcast 1.5.6.255 	  dev eth3 label eth3
-/bin/ip link set dev eth3   up
+/sbin/ip addr add 1.5.6.7/255.255.255.0 broadcast 1.5.6.255 	  dev eth3 label eth3
+/sbin/ip link set dev eth3   up
 
 /bin/run-parts --exit-on-error --verbose /etc/network/if-up.d
 
 ifup: configuring interface eth4=eth4 (inet)
 /bin/run-parts --exit-on-error --verbose /etc/network/if-pre-up.d
-/bin/ip addr add 1.7.8.9/255.255.255.0 broadcast 1.7.8.255 	  dev eth4 label eth4
-/bin/ip link set dev eth4   up
+/sbin/ip addr add 1.7.8.9/255.255.255.0 broadcast 1.7.8.255 	  dev eth4 label eth4
+/sbin/ip link set dev eth4   up
 
 /bin/run-parts --exit-on-error --verbose /etc/network/if-up.d
 
 ifup: configuring interface eth5=eth5 (inet)
 /bin/run-parts --exit-on-error --verbose /etc/network/if-pre-up.d
-/bin/ip addr add 1.8.9.10/255.255.255.0 broadcast 1.8.9.255 	  dev eth5 label eth5
-/bin/ip link set dev eth5   up
+/sbin/ip addr add 1.8.9.10/255.255.255.0 broadcast 1.8.9.255 	  dev eth5 label eth5
+/sbin/ip link set dev eth5   up
 
 /bin/run-parts --exit-on-error --verbose /etc/network/if-up.d
 /bin/run-parts --exit-on-error --verbose /etc/network/if-up.d
diff --git a/tests/linux/up.3 b/tests/linux/up.3
index 54ec785..66223c0 100644
--- a/tests/linux/up.3
+++ b/tests/linux/up.3
@@ -5,8 +5,8 @@ exit code: 1
 
 ifup: configuring interface eth0=eth0 (inet)
 /bin/run-parts --exit-on-error --verbose /etc/network/if-pre-up.d
-/bin/ip addr add 1.2.3.4/255.255.255.0 broadcast 1.2.3.255 	  dev eth0 label eth0
-/bin/ip link set dev eth0   up
+/sbin/ip addr add 1.2.3.4/255.255.255.0 broadcast 1.2.3.255 	  dev eth0 label eth0
+/sbin/ip link set dev eth0   up
 
 /bin/run-parts --exit-on-error --verbose /etc/network/if-up.d
 ifup: configuring interface eth0=eth0 (inet6)
@@ -16,8 +16,8 @@ ifup: configuring interface eth0=eth0 (inet6)
 
 /sbin/sysctl -q -e -w net.ipv6.conf.eth0.autoconf=0
 
-/bin/ip link set dev eth0  up
-/bin/ip -6 addr add 3ffe:ffff:100:f101::1/64  dev eth0  nodad
+/sbin/ip link set dev eth0  up
+/sbin/ip -6 addr add 3ffe:ffff:100:f101::1/64  dev eth0  nodad
 
 /bin/run-parts --exit-on-error --verbose /etc/network/if-up.d
 ifup: configuring interface eth0=eth0 (inet6)
@@ -27,8 +27,8 @@ ifup: configuring interface eth0=eth0 (inet6)
 
 /sbin/sysctl -q -e -w net.ipv6.conf.eth0.autoconf=0
 
-/bin/ip link set dev eth0  up
-/bin/ip -6 addr add 3ffe:ffff:100:f101::2/64  dev eth0  nodad
+/sbin/ip link set dev eth0  up
+/sbin/ip -6 addr add 3ffe:ffff:100:f101::2/64  dev eth0  nodad
 
 /bin/run-parts --exit-on-error --verbose /etc/network/if-up.d
 ifup: configuring interface eth0=eth0 (inet6)
@@ -38,8 +38,8 @@ ifup: configuring interface eth0=eth0 (inet6)
 
 /sbin/sysctl -q -e -w net.ipv6.conf.eth0.autoconf=0
 
-/bin/ip link set dev eth0  up
-/bin/ip -6 addr add 3ffe:ffff:100:f101::3/64  dev eth0  nodad
+/sbin/ip link set dev eth0  up
+/sbin/ip -6 addr add 3ffe:ffff:100:f101::3/64  dev eth0  nodad
 
 /bin/run-parts --exit-on-error --verbose /etc/network/if-up.d
 ifup: configuring interface eth0=eth0 (inet6)
@@ -49,8 +49,8 @@ ifup: configuring interface eth0=eth0 (inet6)
 
 /sbin/sysctl -q -e -w net.ipv6.conf.eth0.autoconf=0
 
-/bin/ip link set dev eth0  up
-/bin/ip -6 addr add 3ffe:ffff:100:f101::4  dev eth0  nodad
+/sbin/ip link set dev eth0  up
+/sbin/ip -6 addr add 3ffe:ffff:100:f101::4  dev eth0  nodad
 
 /bin/run-parts --exit-on-error --verbose /etc/network/if-up.d
 ifup: configuring interface eth0=eth0 (inet6)
@@ -60,8 +60,8 @@ ifup: configuring interface eth0=eth0 (inet6)
 
 /sbin/sysctl -q -e -w net.ipv6.conf.eth0.autoconf=0
 
-/bin/ip link set dev eth0  up
-/bin/ip -6 addr add 3ffe:ffff:100:f101::5/128  dev eth0  nodad
+/sbin/ip link set dev eth0  up
+/sbin/ip -6 addr add 3ffe:ffff:100:f101::5/128  dev eth0  nodad
 
 /bin/run-parts --exit-on-error --verbose /etc/network/if-up.d
 ifup: configuring interface eth0=eth0 (inet6)
@@ -71,8 +71,8 @@ ifup: configuring interface eth0=eth0 (inet6)
 
 /sbin/sysctl -q -e -w net.ipv6.conf.eth0.autoconf=0
 
-/bin/ip link set dev eth0  up
-/bin/ip -6 addr add 64  dev eth0  nodad
+/sbin/ip link set dev eth0  up
+/sbin/ip -6 addr add 64  dev eth0  nodad
 
 /bin/run-parts --exit-on-error --verbose /etc/network/if-up.d
 ifup: configuring interface eth0=eth0 (inet6)
@@ -87,10 +87,10 @@ ifup: configuring interface eth1=eth1 (inet6)
 /sbin/sysctl -q -e -w net.ipv6.conf.eth1.accept_ra=0
 /sbin/sysctl -q -e -w net.ipv6.conf.eth1.autoconf=0
 
-/bin/ip addr flush dev eth1 mngtmpaddr
-/bin/ip link set dev eth1  up
-/bin/ip -6 addr add 3ffe:ffff:100:f102::1/64  dev eth1  nodad
- /bin/ip -6 route add default via 3ffe:ffff:100:f102::fff  dev eth1 onlink 
+/sbin/ip addr flush dev eth1 mngtmpaddr
+/sbin/ip link set dev eth1  up
+/sbin/ip -6 addr add 3ffe:ffff:100:f102::1/64  dev eth1  nodad
+ /sbin/ip -6 route add default via 3ffe:ffff:100:f102::fff  dev eth1 onlink 
 /bin/run-parts --exit-on-error --verbose /etc/network/if-up.d
 ifup: configuring interface eth1=eth1 (inet6)
 /bin/run-parts --exit-on-error --verbose /etc/network/if-pre-up.d
@@ -99,8 +99,8 @@ ifup: configuring interface eth1=eth1 (inet6)
 /sbin/sysctl -q -e -w net.ipv6.conf.eth1.accept_ra=1
 /sbin/sysctl -q -e -w net.ipv6.conf.eth1.autoconf=0
 
-/bin/ip link set dev eth1  up
-/bin/ip -6 addr add 3ffe:ffff:100:f102::6/64  dev eth1  nodad
- /bin/ip -6 route add default via 3ffe:ffff:100:f102::fff  dev eth1 onlink 
+/sbin/ip link set dev eth1  up
+/sbin/ip -6 addr add 3ffe:ffff:100:f102::6/64  dev eth1  nodad
+ /sbin/ip -6 route add default via 3ffe:ffff:100:f102::fff  dev eth1 onlink 
 /bin/run-parts --exit-on-error --verbose /etc/network/if-up.d
 /bin/run-parts --exit-on-error --verbose /etc/network/if-up.d
diff --git a/tests/linux/up.4 b/tests/linux/up.4
index 081860e..575c9ae 100644
--- a/tests/linux/up.4
+++ b/tests/linux/up.4
@@ -4,8 +4,8 @@ exit code: 0
 
 ifup: configuring interface eth0=work (inet)
 /bin/run-parts --exit-on-error --verbose /etc/network/if-pre-up.d
-/bin/ip addr add 1.2.3.4/255.255.255.0 broadcast 1.2.3.255 	  dev eth0 label eth0
-/bin/ip link set dev eth0   up
+/sbin/ip addr add 1.2.3.4/255.255.255.0 broadcast 1.2.3.255 	  dev eth0 label eth0
+/sbin/ip link set dev eth0   up
 
 echo hi
 echo hello
diff --git a/tests/linux/up.5 b/tests/linux/up.5
index d4d00c8..ec6f493 100644
--- a/tests/linux/up.5
+++ b/tests/linux/up.5
@@ -5,8 +5,8 @@ exit code: 0
 
 ifup: configuring interface eth0=eth0 (inet)
 /bin/run-parts --exit-on-error --verbose /etc/network/if-pre-up.d
-/bin/ip addr add 1.2.3.4/255.255.255.0 broadcast 1.2.3.255 	  dev eth0 label eth0
-/bin/ip link set dev eth0  address 00:DE:AD:00:BE:AF up
+/sbin/ip addr add 1.2.3.4/255.255.255.0 broadcast 1.2.3.255 	  dev eth0 label eth0
+/sbin/ip link set dev eth0  address 00:DE:AD:00:BE:AF up
 
 /bin/run-parts --exit-on-error --verbose /etc/network/if-up.d
 /bin/run-parts --exit-on-error --verbose /etc/network/if-up.d
diff --git a/tests/linux/up.6 b/tests/linux/up.6
index d4d00c8..ec6f493 100644
--- a/tests/linux/up.6
+++ b/tests/linux/up.6
@@ -5,8 +5,8 @@ exit code: 0
 
 ifup: configuring interface eth0=eth0 (inet)
 /bin/run-parts --exit-on-error --verbose /etc/network/if-pre-up.d
-/bin/ip addr add 1.2.3.4/255.255.255.0 broadcast 1.2.3.255 	  dev eth0 label eth0
-/bin/ip link set dev eth0  address 00:DE:AD:00:BE:AF up
+/sbin/ip addr add 1.2.3.4/255.255.255.0 broadcast 1.2.3.255 	  dev eth0 label eth0
+/sbin/ip link set dev eth0  address 00:DE:AD:00:BE:AF up
 
 /bin/run-parts --exit-on-error --verbose /etc/network/if-up.d
 /bin/run-parts --exit-on-error --verbose /etc/network/if-up.d
diff --git a/tests/linux/up.7 b/tests/linux/up.7
index b884a6a..901a898 100644
--- a/tests/linux/up.7
+++ b/tests/linux/up.7
@@ -5,8 +5,8 @@ exit code: 0
 
 ifup: configuring interface eth0=eth0 (inet)
 /bin/run-parts --exit-on-error --verbose /etc/network/if-pre-up.d
-/bin/ip addr add 1.2.3.4/255.255.255.0 broadcast 1.2.3.255 	  dev eth0 label eth0
-/bin/ip link set dev eth0   up
+/sbin/ip addr add 1.2.3.4/255.255.255.0 broadcast 1.2.3.255 	  dev eth0 label eth0
+/sbin/ip link set dev eth0   up
 
 /bin/run-parts --exit-on-error --verbose /etc/network/if-up.d
 ifup: configuring interface eth0=eth0 (inet6)
@@ -16,16 +16,16 @@ ifup: configuring interface eth0=eth0 (inet6)
 /sbin/sysctl -q -e -w net.ipv6.conf.eth0.accept_ra=0
 /sbin/sysctl -q -e -w net.ipv6.conf.eth0.autoconf=0
 
-/bin/ip addr flush dev eth0 mngtmpaddr
-/bin/ip link set dev eth0  up
-/bin/ip -6 addr add 3ffe:ffff:100:f101::1/64  dev eth0  nodad
+/sbin/ip addr flush dev eth0 mngtmpaddr
+/sbin/ip link set dev eth0  up
+/sbin/ip -6 addr add 3ffe:ffff:100:f101::1/64  dev eth0  nodad
 
 /bin/run-parts --exit-on-error --verbose /etc/network/if-up.d
 
 ifup: configuring interface eth0=eth0 (inet)
 /bin/run-parts --exit-on-error --verbose /etc/network/if-pre-up.d
-/bin/ip addr add 1.2.3.4/255.255.255.0 broadcast 1.2.3.255 	  dev eth0 label eth0
-/bin/ip link set dev eth0   up
+/sbin/ip addr add 1.2.3.4/255.255.255.0 broadcast 1.2.3.255 	  dev eth0 label eth0
+/sbin/ip link set dev eth0   up
 
 /bin/run-parts --exit-on-error --verbose /etc/network/if-up.d
 ifup: configuring interface eth0=eth0 (inet6)
@@ -35,12 +35,12 @@ ifup: configuring interface eth0=eth0 (inet6)
 /sbin/sysctl -q -e -w net.ipv6.conf.eth0.accept_ra=0
 /sbin/sysctl -q -e -w net.ipv6.conf.eth0.autoconf=0
 
-/bin/ip addr flush dev eth0 mngtmpaddr
-/bin/ip link set dev eth0  up
-/bin/ip -6 addr add 3ffe:ffff:100:f101::1/64  dev eth0  nodad
+/sbin/ip addr flush dev eth0 mngtmpaddr
+/sbin/ip link set dev eth0  up
+/sbin/ip -6 addr add 3ffe:ffff:100:f101::1/64  dev eth0  nodad
 
 /bin/run-parts --exit-on-error --verbose /etc/network/if-up.d
-if test -d /sys/class/net/eth0 &&     	! ip link show eth0.1 >/dev/null 2>&1;     then         if test `cat /sys/class/net/eth0/type` -eq 32; then             echo 0x1 > /sys/class/net/eth0/create_child;         else             /bin/ip link set up dev eth0;             /bin/ip link add link eth0 name eth0.1 type vlan id 1; 	fi;     fi
+if test -d /sys/class/net/eth0 &&     	! ip link show eth0.1 >/dev/null 2>&1;     then         if test `cat /sys/class/net/eth0/type` -eq 32; then             echo 0x1 > /sys/class/net/eth0/create_child;         else             /sbin/ip link set up dev eth0;             /sbin/ip link add link eth0 name eth0.1 type vlan id 1; 	fi;     fi
 
 ifup: configuring interface eth0.1=eth0.1 (inet6)
 /bin/run-parts --exit-on-error --verbose /etc/network/if-pre-up.d
@@ -49,15 +49,15 @@ ifup: configuring interface eth0.1=eth0.1 (inet6)
 
 /sbin/sysctl -q -e -w net.ipv6.conf.eth0/1.autoconf=0
 
-/bin/ip link set dev eth0.1  up
-/bin/ip -6 addr add 3ffe:ffff:120:f101::1/64  dev eth0.1  nodad
+/sbin/ip link set dev eth0.1  up
+/sbin/ip -6 addr add 3ffe:ffff:120:f101::1/64  dev eth0.1  nodad
 
 /bin/run-parts --exit-on-error --verbose /etc/network/if-up.d
 
 ifup: configuring interface eth0=eth0 (inet)
 /bin/run-parts --exit-on-error --verbose /etc/network/if-pre-up.d
-/bin/ip addr add 1.2.3.4/255.255.255.0 broadcast 1.2.3.255 	  dev eth0 label eth0
-/bin/ip link set dev eth0   up
+/sbin/ip addr add 1.2.3.4/255.255.255.0 broadcast 1.2.3.255 	  dev eth0 label eth0
+/sbin/ip link set dev eth0   up
 
 /bin/run-parts --exit-on-error --verbose /etc/network/if-up.d
 ifup: configuring interface eth0=eth0 (inet6)
@@ -67,42 +67,42 @@ ifup: configuring interface eth0=eth0 (inet6)
 /sbin/sysctl -q -e -w net.ipv6.conf.eth0.accept_ra=0
 /sbin/sysctl -q -e -w net.ipv6.conf.eth0.autoconf=0
 
-/bin/ip addr flush dev eth0 mngtmpaddr
-/bin/ip link set dev eth0  up
-/bin/ip -6 addr add 3ffe:ffff:100:f101::1/64  dev eth0  nodad
+/sbin/ip addr flush dev eth0 mngtmpaddr
+/sbin/ip link set dev eth0  up
+/sbin/ip -6 addr add 3ffe:ffff:100:f101::1/64  dev eth0  nodad
 
 /bin/run-parts --exit-on-error --verbose /etc/network/if-up.d
-if test -d /sys/class/net/eth0 &&     	! ip link show eth0.0201 >/dev/null 2>&1;     then         if test `cat /sys/class/net/eth0/type` -eq 32; then             echo 0x0201 > /sys/class/net/eth0/create_child;         else             /bin/ip link set up dev eth0;             /bin/ip link add link eth0 name eth0.0201 type vlan id 201; 	fi;     fi
+if test -d /sys/class/net/eth0 &&     	! ip link show eth0.0201 >/dev/null 2>&1;     then         if test `cat /sys/class/net/eth0/type` -eq 32; then             echo 0x0201 > /sys/class/net/eth0/create_child;         else             /sbin/ip link set up dev eth0;             /sbin/ip link add link eth0 name eth0.0201 type vlan id 201; 	fi;     fi
 
 ifup: configuring interface eth0.0201=eth0.0201 (inet)
 /bin/run-parts --exit-on-error --verbose /etc/network/if-pre-up.d
-/bin/ip addr add 192.168.0.1/255.255.255.128 broadcast 192.168.0.127 	  dev eth0.0201 label eth0.0201
-/bin/ip link set dev eth0.0201   up
+/sbin/ip addr add 192.168.0.1/255.255.255.128 broadcast 192.168.0.127 	  dev eth0.0201 label eth0.0201
+/sbin/ip link set dev eth0.0201   up
 
 /bin/run-parts --exit-on-error --verbose /etc/network/if-up.d
-if test -d /sys/class/net/br0 &&     	! ip link show br0.0201 >/dev/null 2>&1;     then         if test `cat /sys/class/net/br0/type` -eq 32; then             echo 0x0201 > /sys/class/net/br0/create_child;         else             /bin/ip link set up dev br0;             /bin/ip link add link br0 name br0.0201 type vlan id 201; 	fi;     fi
+if test -d /sys/class/net/br0 &&     	! ip link show br0.0201 >/dev/null 2>&1;     then         if test `cat /sys/class/net/br0/type` -eq 32; then             echo 0x0201 > /sys/class/net/br0/create_child;         else             /sbin/ip link set up dev br0;             /sbin/ip link add link br0 name br0.0201 type vlan id 201; 	fi;     fi
 
 ifup: configuring interface br0.0201=br0.0201 (inet)
 /bin/run-parts --exit-on-error --verbose /etc/network/if-pre-up.d
 
 
-/bin/ip link set dev br0.0201 up 2>/dev/null || true
+/sbin/ip link set dev br0.0201 up 2>/dev/null || true
 /bin/run-parts --exit-on-error --verbose /etc/network/if-up.d
-if test -d /sys/class/net/br0 &&     	! ip link show br0.0202 >/dev/null 2>&1;     then         if test `cat /sys/class/net/br0/type` -eq 32; then             echo 0x0202 > /sys/class/net/br0/create_child;         else             /bin/ip link set up dev br0;             /bin/ip link add link br0 name br0.0202 type vlan id 202; 	fi;     fi
+if test -d /sys/class/net/br0 &&     	! ip link show br0.0202 >/dev/null 2>&1;     then         if test `cat /sys/class/net/br0/type` -eq 32; then             echo 0x0202 > /sys/class/net/br0/create_child;         else             /sbin/ip link set up dev br0;             /sbin/ip link add link br0 name br0.0202 type vlan id 202; 	fi;     fi
 
 ifup: configuring interface br0.0202=br0.0202 (inet)
 /bin/run-parts --exit-on-error --verbose /etc/network/if-pre-up.d
 
 
-/bin/ip link set dev br0.0202 up 2>/dev/null || true
+/sbin/ip link set dev br0.0202 up 2>/dev/null || true
 /bin/run-parts --exit-on-error --verbose /etc/network/if-up.d
 
 ifup: configuring interface tunnel=tunnel (inet6)
 /bin/run-parts --exit-on-error --verbose /etc/network/if-pre-up.d
 /sbin/modprobe -q net-pf-10 > /dev/null 2>&1 || true # ignore failure.
-/bin/ip tunnel add tunnel mode sit remote any local 1.2.3.4        
-/bin/ip link set tunnel up 
-/bin/ip addr add 2002:0102:0304::1/16 dev tunnel 
-/bin/ip route add 2000::/3 via ::192.88.99.1  dev tunnel
+/sbin/ip tunnel add tunnel mode sit remote any local 1.2.3.4        
+/sbin/ip link set tunnel up 
+/sbin/ip addr add 2002:0102:0304::1/16 dev tunnel 
+/sbin/ip route add 2000::/3 via ::192.88.99.1  dev tunnel
 /bin/run-parts --exit-on-error --verbose /etc/network/if-up.d
 /bin/run-parts --exit-on-error --verbose /etc/network/if-up.d
diff --git a/tests/linux/up.8 b/tests/linux/up.8
index e79ab13..f1f3f59 100644
--- a/tests/linux/up.8
+++ b/tests/linux/up.8
@@ -5,8 +5,8 @@ exit code: 0
 
 ifup: configuring interface eth1=eth1 (inet)
 /bin/run-parts --exit-on-error --verbose /etc/network/if-pre-up.d
-/bin/ip addr add 1.2.3.4/255.255.255.0 broadcast 1.2.3.255 	  dev eth1 label eth1
-/bin/ip link set dev eth1   up
+/sbin/ip addr add 1.2.3.4/255.255.255.0 broadcast 1.2.3.255 	  dev eth1 label eth1
+/sbin/ip link set dev eth1   up
 
 echo hi
 echo hello
@@ -14,26 +14,26 @@ echo hello
 
 ifup: configuring interface eth1:1=eth1:1 (inet)
 /bin/run-parts --exit-on-error --verbose /etc/network/if-pre-up.d
-/bin/ip addr add 1.5.3.4/255.255.255.0 broadcast 1.5.3.255 	  dev eth1:1 label eth1:1
-/bin/ip link set dev eth1:1   up
+/sbin/ip addr add 1.5.3.4/255.255.255.0 broadcast 1.5.3.255 	  dev eth1:1 label eth1:1
+/sbin/ip link set dev eth1:1   up
 
 echo hihi
 echo hellolo
 /bin/run-parts --exit-on-error --verbose /etc/network/if-up.d
-if test -d /sys/class/net/eth2 &&     	! ip link show eth2.2 >/dev/null 2>&1;     then         if test `cat /sys/class/net/eth2/type` -eq 32; then             echo 0x2 > /sys/class/net/eth2/create_child;         else             /bin/ip link set up dev eth2;             /bin/ip link add link eth2 name eth2.2 type vlan id 2; 	fi;     fi
+if test -d /sys/class/net/eth2 &&     	! ip link show eth2.2 >/dev/null 2>&1;     then         if test `cat /sys/class/net/eth2/type` -eq 32; then             echo 0x2 > /sys/class/net/eth2/create_child;         else             /sbin/ip link set up dev eth2;             /sbin/ip link add link eth2 name eth2.2 type vlan id 2; 	fi;     fi
 
 ifup: configuring interface eth2.2=eth2.2 (inet)
 /bin/run-parts --exit-on-error --verbose /etc/network/if-pre-up.d
-/bin/ip addr add 2.3.4.5/255.255.255.0 broadcast 2.3.4.255 	  dev eth2.2 label eth2.2
-/bin/ip link set dev eth2.2   up
+/sbin/ip addr add 2.3.4.5/255.255.255.0 broadcast 2.3.4.255 	  dev eth2.2 label eth2.2
+/sbin/ip link set dev eth2.2   up
 
 /bin/run-parts --exit-on-error --verbose /etc/network/if-up.d
-if test -d /sys/class/net/eth2 &&     	! ip link show eth2.2 >/dev/null 2>&1;     then         if test `cat /sys/class/net/eth2/type` -eq 32; then             echo 0x2 > /sys/class/net/eth2/create_child;         else             /bin/ip link set up dev eth2;             /bin/ip link add link eth2 name eth2.2 type vlan id 2; 	fi;     fi
+if test -d /sys/class/net/eth2 &&     	! ip link show eth2.2 >/dev/null 2>&1;     then         if test `cat /sys/class/net/eth2/type` -eq 32; then             echo 0x2 > /sys/class/net/eth2/create_child;         else             /sbin/ip link set up dev eth2;             /sbin/ip link add link eth2 name eth2.2 type vlan id 2; 	fi;     fi
 
 ifup: configuring interface eth2.2:3=eth2.2:3 (inet)
 /bin/run-parts --exit-on-error --verbose /etc/network/if-pre-up.d
-/bin/ip addr add 3.4.5.6/255.255.254.0 broadcast 3.4.5.255 	  dev eth2.2:3 label eth2.2:3
-/bin/ip link set dev eth2.2:3   up
+/sbin/ip addr add 3.4.5.6/255.255.254.0 broadcast 3.4.5.255 	  dev eth2.2:3 label eth2.2:3
+/sbin/ip link set dev eth2.2:3   up
 
 /bin/run-parts --exit-on-error --verbose /etc/network/if-up.d
 /bin/run-parts --exit-on-error --verbose /etc/network/if-up.d
diff --git a/tests/linux/up.9 b/tests/linux/up.9
index d7db524..378a21a 100644
--- a/tests/linux/up.9
+++ b/tests/linux/up.9
@@ -5,8 +5,8 @@ exit code: 0
 ifup: configuring interface tunnel=tunnel (inet6)
 /bin/run-parts --exit-on-error --verbose /etc/network/if-pre-up.d
 /sbin/modprobe -q net-pf-10 > /dev/null 2>&1 || true # ignore failure.
-/bin/ip tunnel add tunnel mode sit remote any local 2.3.4.5        
-/bin/ip link set tunnel up 
-/bin/ip addr add 2002:0203:0405::1/16 dev tunnel 
-/bin/ip route add 2000::/3 via ::192.88.99.1  dev tunnel
+/sbin/ip tunnel add tunnel mode sit remote any local 2.3.4.5        
+/sbin/ip link set tunnel up 
+/sbin/ip addr add 2002:0203:0405::1/16 dev tunnel 
+/sbin/ip route add 2000::/3 via ::192.88.99.1  dev tunnel
 /bin/run-parts --exit-on-error --verbose /etc/network/if-up.d
diff --git a/wait-online.sh b/wait-online.sh
index 27ea79a..5fbf0f8 100755
--- a/wait-online.sh
+++ b/wait-online.sh
@@ -11,7 +11,7 @@ WAIT_ONLINE_TIMEOUT=300
 case "$WAIT_ONLINE_METHOD" in
 route)
 	[ -n "$WAIT_ONLINE_ADDRESS" ] || WAIT_ONLINE_ADDRESS=default
-	(/usr/bin/timeout "$WAIT_ONLINE_TIMEOUT" /bin/ip mon r & /bin/ip -4 r s; /bin/ip -6 r s) | /bin/grep -q "^$WAIT_ONLINE_ADDRESS\>"
+	(/usr/bin/timeout "$WAIT_ONLINE_TIMEOUT" /sbin/ip mon r & /sbin/ip -4 r s; /sbin/ip -6 r s) | /bin/grep -q "^$WAIT_ONLINE_ADDRESS\>"
 	;;
 
 ping)
-- 
2.16.3

