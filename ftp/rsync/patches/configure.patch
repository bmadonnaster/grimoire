diff --git a/configure.sh b/configure.sh
--- a/configure.sh
+++ b/configure.sh
@@ -9969,20 +9969,17 @@ if test x"$ac_cv_header_popt_popt_h" = x"yes"; then
     # might conflict with the system popt.
     with_included_popt=yes
 elif test x"$ac_cv_header_popt_h" != x"yes"; then
-    with_included_popt=yes
+    with_included_popt=no
 fi
 
 if test x"$GCC" = x"yes"; then
-    if test x"$with_included_popt" != x"yes"; then
-	# Turn pedantic warnings into errors to ensure an array-init overflow is an error.
-	CFLAGS="$CFLAGS -pedantic-errors"
-    else
+    if test x"$with_included_popt" = x"yes"; then
 	# Our internal popt code cannot be compiled with pedantic warnings as errors, so try to
 	# turn off pedantic warnings (which will not lose the error for array-init overflow).
 	# Older gcc versions don't understand -Wno-pedantic, so check if --help=warnings lists
 	# -Wpedantic and use that as a flag.
 	case `$CC --help=warnings 2>/dev/null | grep Wpedantic` in
-	    *-Wpedantic*) CFLAGS="$CFLAGS -pedantic-errors -Wno-pedantic" ;;
+	    *-Wpedantic*) CFLAGS="$CFLAGS -Wno-pedantic" ;;
 	esac
     fi
 fi
