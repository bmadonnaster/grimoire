From 7ca28c2fedb34c1db5ee3116d335f15195859db0 Mon Sep 17 00:00:00 2001
From: Behdad Esfahbod <behdad@behdad.org>
Date: Mon, 18 Dec 2017 21:22:21 -0500
Subject: Don't crash

Not proper fix necessarily. But fixes this crash:
https://bugs.freedesktop.org/show_bug.cgi?id=101889#c81
---
 src/fcmatch.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/src/fcmatch.c b/src/fcmatch.c
index 5d30cc7..95bb204 100644
--- a/src/fcmatch.c
+++ b/src/fcmatch.c
@@ -653,7 +653,7 @@ FcFontRenderPrepare (FcConfig	    *config,
 		if (!l)
 		    goto bail0;
 		dir = FcStrDirname (FcValueString (&l->value));
-		if (FcHashTableFind (config->alias_table, dir, (void **) &alias))
+		if (config && FcHashTableFind (config->alias_table, dir, (void **) &alias))
 		{
 		    FcChar8 *base = FcStrBasename (FcValueString (&l->value));
 		    FcChar8 *s = FcStrBuildFilename (alias, base, NULL);
-- 
cgit v1.1

