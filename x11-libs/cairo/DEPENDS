. "$GRIMOIRE/FUNCTIONS" &&

depends freetype2 '--enable-ft=yes' &&
depends fontconfig &&
depends pixman &&
depends xz-utils &&

if spell_ok pixman && is_version_less $(installed_version pixman) 0.30.0; then
  force_depends pixman
fi &&

optional_depends zlib \
                 "--enable-xml=yes" \
                 "--enable-xml=no" \
                 "for XML surface backend" &&

# uses libbfd-*.so
optional_depends -sub LIBERTY binutils \
                 "--enable-symbol-lookup=yes" \
                 "--enable-symbol-lookup=no" \
                 "for symbol-lookup feature" &&

optional_depends libxcb \
                 "--enable-xcb=yes" \
                 "--enable-xcb=no" \
                 "for XCB surface backend feature" &&

optional_depends glib2 \
                 "--enable-gobject=yes" \
                 "--enable-gobject=no" \
                 "for gobject functions feature" &&

optional_depends libx11 \
                 "--enable-xlib=yes" \
                 "--enable-xlib=no" \
                 "for Xlib surface backend feature" &&

if is_depends_enabled $SPELL libx11; then
  depends xorgproto &&
  depends libxext &&
  optional_depends libxrender \
                   "--enable-xlib-xrender=yes" \
                   "--enable-xlib-xrender=no" \
                   "for Xlib Xrender surface backend" &&

  if is_depends_enabled ${SPELL} libxcb; then
    config_query_option CAIRO_OPTS "Enable Xlib/XCB functions feature?" n \
                                   "--enable-xlib-xcb=yes" \
                                   "--enable-xlib-xcb=no" &&
   list_remove CAIRO_OPTS "--enable-xlib-xcb" &&
   list_remove CAIRO_OPTS "--disable-xlib-xcb"
  fi
fi &&

optional_depends libpng \
                 "--enable-png=yes" \
                 "--enable-png=no" \
                 "for PNG support" &&
if is_depends_enabled ${SPELL} libpng; then
  optional_depends librsvg2 \
                   "--enable-svg=yees" \
                   "--enable-svg=no" \
                   "for SVG support"
fi &&

optional_depends OPENGL \
                 "--enable-gl=yes" \
                 "--enable-gl=no" \
                 "for OpenGL accelerated graphics" &&


optional_depends gtk-doc \
                 "--enable-gtk-doc=yes" \
                 "--enable-gtk-doc=no" \
                 "Build documentation with gtk-doc" &&

optional_depends valgrind \
                 "--enable-valgrind=yes" \
                 "--enable-valgrind=no" \
                 "for Valgrind support"
