From 68a2654ffdd5dd9bb31eaa505d50714f31c8a98f Mon Sep 17 00:00:00 2001
From: Treeve Jelbert <treeve@sourcemage.org>
Date: Mon, 13 Aug 2018 20:19:22 +0200
Subject: [PATCH 1/3] cpp-utils improvement

---
 src/cpp-utils/CMakeLists.txt      | 5 ++---
 src/cpp-utils/crypto/kdf/Scrypt.h | 2 +-
 src/cpp-utils/logging/Logger.h    | 1 +
 src/cpp-utils/logging/logging.h   | 2 +-
 4 files changed, 5 insertions(+), 5 deletions(-)

diff --git a/src/cpp-utils/CMakeLists.txt b/src/cpp-utils/CMakeLists.txt
index a934bfe..3a65348 100644
--- a/src/cpp-utils/CMakeLists.txt
+++ b/src/cpp-utils/CMakeLists.txt
@@ -39,12 +39,11 @@ set(SOURCES
 )
 
 add_library(${PROJECT_NAME} STATIC ${SOURCES})
-
-target_link_libraries(${PROJECT_NAME} PUBLIC pthread curl)
+target_link_libraries(${PROJECT_NAME} PUBLIC curl pthread)
 
 # TODO From Crypto++ 5.7 on, it should support cmake with find_package() instead of find_library().
 find_library_with_path(CryptoPP cryptopp CRYPTOPP_LIB_PATH)
-target_link_libraries(${PROJECT_NAME} PUBLIC ${CryptoPP} scrypt spdlog)
+target_link_libraries(${PROJECT_NAME} PUBLIC ${CryptoPP} ${SCRYPT} fmt ${FMT_LIBRARIES})
 
 target_add_boost(${PROJECT_NAME} filesystem system thread)
 target_enable_style_warnings(${PROJECT_NAME})
diff --git a/src/cpp-utils/crypto/kdf/Scrypt.h b/src/cpp-utils/crypto/kdf/Scrypt.h
index 6578e95..9ca3150 100644
--- a/src/cpp-utils/crypto/kdf/Scrypt.h
+++ b/src/cpp-utils/crypto/kdf/Scrypt.h
@@ -8,7 +8,7 @@
 #include "PasswordBasedKDF.h"
 
 extern "C" {
-    #include <scrypt/lib/crypto/crypto_scrypt.h>
+    #include <scrypto/crypto_scrypt.h>
 }
 #include <stdexcept>
 #include "SCryptParameters.h"
diff --git a/src/cpp-utils/logging/Logger.h b/src/cpp-utils/logging/Logger.h
index 45e515c..eabbf7d 100644
--- a/src/cpp-utils/logging/Logger.h
+++ b/src/cpp-utils/logging/Logger.h
@@ -4,6 +4,7 @@
 
 #define SPDLOG_ENABLE_SYSLOG
 #include <spdlog/spdlog.h>
+#include <spdlog/sinks/stdout_sinks.h>
 #include "../macros.h"
 
 namespace cpputils {
diff --git a/src/cpp-utils/logging/logging.h b/src/cpp-utils/logging/logging.h
index f98aa79..cf200ae 100644
--- a/src/cpp-utils/logging/logging.h
+++ b/src/cpp-utils/logging/logging.h
@@ -4,7 +4,7 @@
 
 #include "Logger.h"
 #include <stdexcept>
-#include <spdlog/fmt/ostr.h>
+#include <fmt/ostream.h>
 
 namespace cpputils {
     namespace logging {
-- 
2.18.0

